{"version":3,"file":"index-bd7d68d1.js","sources":["../../../../js/icons/src/Brush.svelte","../../../../js/icons/src/Color.svelte","../../../../js/icons/src/Erase.svelte","../../../../js/icons/src/Sketch.svelte","../../../../js/image/src/utils.ts","../../../../js/image/src/Cropper.svelte","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/Point.js","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyPoint.js","../../../../node_modules/.pnpm/lazy-brush@1.0.1/node_modules/lazy-brush/src/LazyBrush.js","../../../../js/image/src/Sketch.svelte","../../../../js/image/src/ModifySketch.svelte","../../../../js/image/src/SketchSettings.svelte","../../../../js/image/src/Image.svelte","../../../../js/image/src/StaticImage.svelte","../../../../js/app/src/components/Image/Image.svelte","../../../../js/app/src/components/Image/index.ts"],"sourcesContent":["<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\n\t<path\n\t\td=\"M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z\"\n\t\tfill=\"currentColor\"\n\t/>\n\t<path\n\t\td=\"M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z\"\n\t\tfill=\"currentColor\"\n\t/>\n</svg>\n","<svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\">\n\t<circle cx=\"10\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\n\t<circle cx=\"16\" cy=\"9\" r=\"2\" fill=\"currentColor\" />\n\t<circle cx=\"22\" cy=\"12\" r=\"2\" fill=\"currentColor\" />\n\t<circle cx=\"23\" cy=\"18\" r=\"2\" fill=\"currentColor\" />\n\t<circle cx=\"19\" cy=\"23\" r=\"2\" fill=\"currentColor\" />\n\t<path\n\t\tfill=\"currentColor\"\n\t\td=\"M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z\"\n\t/>\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 32 32\"\n\t><path\n\t\tfill=\"currentColor\"\n\t\td=\"M7 27h23v2H7zm20.38-16.49l-7.93-7.92a2 2 0 0 0-2.83 0l-14 14a2 2 0 0 0 0 2.83L7.13 24h9.59l10.66-10.66a2 2 0 0 0 0-2.83zM15.89 22H8l-4-4l6.31-6.31l7.93 7.92zm3.76-3.76l-7.92-7.93L18 4l8 7.93z\"\n\t/></svg\n>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-edit-2\"\n>\n\t<path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\" />\n</svg>\n","export const get_coordinates_of_clicked_image = (\n\tevt: MouseEvent\n): [number, number] | null => {\n\tlet image = evt.currentTarget as HTMLImageElement;\n\n\tconst imageRect = image.getBoundingClientRect();\n\tconst xScale = image.naturalWidth / imageRect.width;\n\tconst yScale = image.naturalHeight / imageRect.height;\n\tif (xScale > yScale) {\n\t\tconst displayed_width = imageRect.width;\n\t\tconst displayed_height = image.naturalHeight / xScale;\n\t\tconst y_offset = (imageRect.height - displayed_height) / 2;\n\t\tvar x = Math.round((evt.clientX - imageRect.left) * xScale);\n\t\tvar y = Math.round((evt.clientY - imageRect.top - y_offset) * xScale);\n\t} else {\n\t\tconst displayed_width = image.naturalWidth / yScale;\n\t\tconst displayed_height = imageRect.height;\n\t\tconst x_offset = (imageRect.width - displayed_width) / 2;\n\t\tvar x = Math.round((evt.clientX - imageRect.left - x_offset) * yScale);\n\t\tvar y = Math.round((evt.clientY - imageRect.top) * yScale);\n\t}\n\tif (x < 0 || x >= image.naturalWidth || y < 0 || y >= image.naturalHeight) {\n\t\treturn null;\n\t}\n\treturn [x, y];\n};\n","<svelte:options accessors={true} />\n\n<script lang=\"ts\">\n\timport Cropper from \"cropperjs\";\n\timport { onMount, createEventDispatcher } from \"svelte\";\n\n\texport let image: string;\n\tlet el: HTMLImageElement;\n\n\tconst dispatch = createEventDispatcher();\n\tlet cropper: Cropper;\n\n\texport function destroy() {\n\t\tcropper.destroy();\n\t}\n\n\texport function create() {\n\t\tif (cropper) {\n\t\t\tdestroy();\n\t\t}\n\t\tcropper = new Cropper(el, {\n\t\t\tautoCropArea: 1,\n\t\t\tcropend() {\n\t\t\t\tconst image_data = cropper.getCroppedCanvas().toDataURL();\n\t\t\t\tdispatch(\"crop\", image_data);\n\t\t\t}\n\t\t});\n\n\t\tdispatch(\"crop\", image);\n\t}\n</script>\n\n<img src={image} bind:this={el} alt=\"\" />\n","class Point {\n  /**\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  constructor(x, y) {\n    this.x = x\n    this.y = y\n  }\n}\n\nexport default Point\n","import Point from './Point'\n\nclass LazyPoint extends Point {\n  /**\n   * Update the x and y values\n   *\n   * @param {Point} point\n   */\n  update (point) {\n    this.x = point.x\n    this.y = point.y\n  }\n\n  /**\n   * Move the point to another position using an angle and distance\n   *\n   * @param {number} angle The angle in radians\n   * @param {number} distance How much the point should be moved\n   */\n  moveByAngle (angle, distance) {\n    // Rotate the angle based on the browser coordinate system ([0,0] in the top left)\n    const angleRotated = angle + (Math.PI / 2)\n\n    this.x = this.x + (Math.sin(angleRotated) * distance),\n    this.y = this.y - (Math.cos(angleRotated) * distance)\n  }\n\n  /**\n   * Check if this point is the same as another point\n   *\n   * @param {Point} point\n   * @returns {boolean}\n   */\n  equalsTo (point) {\n    return this.x === point.x && this.y === point.y\n  }\n\n  /**\n   * Get the difference for x and y axis to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDifferenceTo (point) {\n    return new Point(this.x - point.x, this.y - point.y)\n  }\n\n  /**\n   * Calculate distance to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getDistanceTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.sqrt(Math.pow(diff.x, 2) + Math.pow(diff.y, 2))\n  }\n\n  /**\n   * Calculate the angle to another point\n   *\n   * @param {Point} point\n   * @returns {Point}\n   */\n  getAngleTo (point) {\n    const diff = this.getDifferenceTo(point)\n\n    return Math.atan2(diff.y, diff.x)\n  }\n\n  /**\n   * Return a simple object with x and y properties\n   *\n   * @returns {object}\n   */\n  toObject () {\n    return {\n      x: this.x,\n      y: this.y\n    }\n  }\n}\n\nexport default LazyPoint\n","import LazyPoint from './LazyPoint'\nconst RADIUS_DEFAULT = 30\n\nclass LazyBrush {\n  /**\n   * constructor\n   *\n   * @param {object} settings\n   * @param {number} settings.radius The radius for the lazy area\n   * @param {boolean} settings.enabled\n   */\n  constructor ({ radius = RADIUS_DEFAULT, enabled = true, initialPoint = { x: 0, y: 0 }} = {}) {\n    this.radius = radius\n    this._isEnabled = enabled\n\n    this.pointer = new LazyPoint(initialPoint.x, initialPoint.y)\n    this.brush = new LazyPoint(initialPoint.x, initialPoint.y)\n\n    this.angle = 0\n    this.distance = 0\n    this._hasMoved = false\n  }\n\n  /**\n   * Enable lazy brush calculations.\n   *\n   */\n  enable () {\n    this._isEnabled = true\n  }\n\n  /**\n   * Disable lazy brush calculations.\n   *\n   */\n  disable () {\n    this._isEnabled = false\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isEnabled () {\n    return this._isEnabled\n  }\n\n  /**\n   * Update the radius\n   *\n   * @param {number} radius\n   */\n  setRadius (radius) {\n    this.radius = radius\n  }\n\n  /**\n   * Return the current radius\n   *\n   * @returns {number}\n   */\n  getRadius () {\n    return this.radius\n  }\n\n  /**\n   * Return the brush coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getBrushCoordinates () {\n    return this.brush.toObject()\n  }\n\n  /**\n   * Return the pointer coordinates as a simple object\n   *\n   * @returns {object}\n   */\n  getPointerCoordinates () {\n    return this.pointer.toObject()\n  }\n\n  /**\n   * Return the brush as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getBrush () {\n    return this.brush\n  }\n\n  /**\n   * Return the pointer as a LazyPoint\n   *\n   * @returns {LazyPoint}\n   */\n  getPointer () {\n    return this.pointer\n  }\n\n  /**\n   * Return the angle between pointer and brush\n   *\n   * @returns {number} Angle in radians\n   */\n  getAngle () {\n    return this.angle\n  }\n\n  /**\n   * Return the distance between pointer and brush\n   *\n   * @returns {number} Distance in pixels\n   */\n  getDistance () {\n    return this.distance\n  }\n\n  /**\n   * Return if the previous update has moved the brush.\n   *\n   * @returns {boolean} Whether the brush moved previously.\n   */\n  brushHasMoved () {\n    return this._hasMoved\n  }\n\n  /**\n   * Updates the pointer point and calculates the new brush point.\n   *\n   * @param {Point} newPointerPoint\n   * @param {Object} options\n   * @param {Boolean} options.both Force update pointer and brush\n   * @returns {Boolean} Whether any of the two points changed\n   */\n  update (newPointerPoint, { both = false } = {}) {\n    this._hasMoved = false\n    if (this.pointer.equalsTo(newPointerPoint) && !both) {\n      return false\n    }\n\n    this.pointer.update(newPointerPoint)\n\n    if (both) {\n      this._hasMoved = true\n      this.brush.update(newPointerPoint)\n      return true\n    }\n\n    if (this._isEnabled) {\n      this.distance = this.pointer.getDistanceTo(this.brush)\n      this.angle = this.pointer.getAngleTo(this.brush)\n\n      if (this.distance > this.radius) {\n        this.brush.moveByAngle(this.angle, this.distance - this.radius)\n        this._hasMoved = true\n      }\n    } else {\n      this.distance = 0\n      this.angle = 0\n      this.brush.update(newPointerPoint)\n      this._hasMoved = true\n    }\n\n    return true\n  }\n}\n\nexport default LazyBrush\n\n","<script>\n\t// @ts-nocheck\n\n\timport { onMount, onDestroy, createEventDispatcher, tick } from \"svelte\";\n\timport { fade } from \"svelte/transition\";\n\timport { LazyBrush } from \"lazy-brush/src\";\n\timport { brush_color_store } from \"./Brushcolor\";\n\timport ResizeObserver from \"resize-observer-polyfill\";\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let value;\n\texport let value_img;\n\texport let mode = \"sketch\";\n\texport let brush_color = \"#0b0f19\";\n\texport let brush_radius;\n\texport let mask_opacity = 0.7;\n\texport let source;\n\n\texport let width = 400;\n\texport let height = 200;\n\texport let container_height = 200;\n\texport let shape;\n\n\tif(window.maskOpacity) mask_opacity = window.maskOpacity\n\n\tlet colorPickerEnabled = localStorage.setItem(\"colorPickerEnable\", false);\n\tlet transparentMask = localStorage.setItem(\"transparentMask\", false);\n\tlet posX = 0;\n\tlet posY = 0;\n\tlet lineStartPoint = null;\n\n\tlet isMakMode;\n\n\t$: {\n\t\tif (shape && (width || height)) {\n\t\t\twidth = shape[0];\n\t\t\theight = shape[1];\n\t\t}\n\t}\n\n\tlet mounted;\n\n\tlet catenary_color = \"#aaa\";\n\n\tlet canvas_width = width;\n\tlet canvas_height = height;\n\n\t$: mounted && !value && clear();\n\n\tlet last_value_img;\n\n\t$: {\n\t\tif (mounted && value_img !== last_value_img) {\n\t\t\tlast_value_img = value_img;\n\n\t\t\tclear();\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (source === \"webcam\") {\n\t\t\t\t\tctx.temp.save();\n\t\t\t\t\tctx.temp.translate(width, 0);\n\t\t\t\t\tctx.temp.scale(-1, 1);\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t\tctx.temp.restore();\n\t\t\t\t} else {\n\t\t\t\t\tdraw_cropped_image();\n\t\t\t\t}\n\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\t\t\tdraw_lines({ lines: lines.slice() });\n\t\t\t\ttrigger_on_change();\n\t\t\t}, 50);\n\t\t}\n\t}\n\n\tfunction mid_point(p1, p2) {\n\t\treturn {\n\t\t\tx: p1.x + (p2.x - p1.x) / 2,\n\t\t\ty: p1.y + (p2.y - p1.y) / 2,\n\t\t};\n\t}\n\n\tconst canvas_types = [\n\t\t{\n\t\t\tname: \"interface\",\n\t\t\tzIndex: 15,\n\t\t},\n\t\t{\n\t\t\tname: \"mask\",\n\t\t\tzIndex: 13,\n\t\t\topacity: mask_opacity,\n\t\t},\n\t\t{\n\t\t\tname: \"drawing\",\n\t\t\tzIndex: 11,\n\t\t},\n\t\t{\n\t\t\tname: \"temp\",\n\t\t\tzIndex: 12,\n\t\t},\n\t];\n\n\tlet canvas = {};\n\tlet ctx = {};\n\tlet points = [];\n\tlet lines = [];\n\tlet mouse_has_moved = true;\n\tlet values_changed = true;\n\tlet is_drawing = false;\n\tlet is_pressing = false;\n\tlet lazy = null;\n\tlet canvas_container = null;\n\tlet canvas_observer = null;\n\tlet line_count = 0;\n\n\tif (mode === \"mask\") {\n\t\tif (localStorage.getItem(\"brush_color\")) {\n\t\t\tbrush_color = localStorage.getItem(\"brush_color\");\n\t\t}\n\t}\n\n\tfunction draw_cropped_image() {\n\t\tif (!shape) {\n\t\t\tctx.temp.drawImage(value_img, 0, 0, width, height);\n\t\t\treturn;\n\t\t}\n\n\t\tlet _width = value_img.naturalWidth;\n\t\tlet _height = value_img.naturalHeight;\n\n\t\tconst shape_ratio = shape[0] / shape[1];\n\t\tconst image_ratio = _width / _height;\n\n\t\tlet x = 0;\n\t\tlet y = 0;\n\n\t\tif (shape_ratio < image_ratio) {\n\t\t\t_width = shape[1] * image_ratio;\n\t\t\t_height = shape[1];\n\t\t\tx = (shape[0] - _width) / 2;\n\t\t} else if (shape_ratio > image_ratio) {\n\t\t\t_width = shape[0];\n\t\t\t_height = shape[0] / image_ratio;\n\t\t\ty = (shape[1] - _height) / 2;\n\t\t} else {\n\t\t\tx = 0;\n\t\t\ty = 0;\n\t\t\t_width = shape[0];\n\t\t\t_height = shape[1];\n\t\t}\n\n\t\tctx.temp.drawImage(value_img, x, y, _width, _height);\n\t}\n\n\tonMount(async () => {\n\t\tObject.keys(canvas).forEach((key) => {\n\t\t\tctx[key] = canvas[key].getContext(\"2d\");\n\t\t});\n\n\t\tawait tick();\n\n\t\tif (value_img) {\n\t\t\tvalue_img.addEventListener(\"load\", (_) => {\n\t\t\t\tif (source === \"webcam\") {\n\t\t\t\t\tctx.temp.save();\n\t\t\t\t\tctx.temp.translate(width, 0);\n\t\t\t\t\tctx.temp.scale(-1, 1);\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t\tctx.temp.restore();\n\t\t\t\t} else {\n\t\t\t\t\tdraw_cropped_image();\n\t\t\t\t}\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\t\t\ttrigger_on_change();\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (source === \"webcam\") {\n\t\t\t\t\tctx.temp.save();\n\t\t\t\t\tctx.temp.translate(width, 0);\n\t\t\t\t\tctx.temp.scale(-1, 1);\n\t\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\t\tctx.temp.restore();\n\t\t\t\t} else {\n\t\t\t\t\tdraw_cropped_image();\n\t\t\t\t}\n\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\t\t\tdraw_lines({ lines: lines.slice() });\n\t\t\t\ttrigger_on_change();\n\t\t\t}, 100);\n\t\t}\n\n\t\tlazy = new LazyBrush({\n\t\t\tradius: brush_radius * 0.05,\n\t\t\tenabled: true,\n\t\t\tinitialPoint: {\n\t\t\t\tx: width / 2,\n\t\t\t\ty: height / 2,\n\t\t\t},\n\t\t});\n\n\t\tcanvas_observer = new ResizeObserver((entries, observer, ...rest) => {\n\t\t\thandle_canvas_resize(entries, observer);\n\t\t});\n\t\tcanvas_observer.observe(canvas_container);\n\n\t\tloop();\n\t\tmounted = true;\n\n\t\trequestAnimationFrame(() => {\n\t\t\tinit();\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tclear();\n\t\t\t});\n\t\t});\n\t});\n\n\tfunction init() {\n\t\tconst initX = width / 2;\n\t\tconst initY = height / 2;\n\t\tlazy.update({ x: initX, y: initY }, { both: true });\n\t\tlazy.update({ x: initX, y: initY }, { both: false });\n\t\tmouse_has_moved = true;\n\t\tvalues_changed = true;\n\t}\n\n\tonDestroy(() => {\n\t\tmounted = false;\n\t\tcanvas_observer.unobserve(canvas_container);\n\t});\n\n\texport function redraw() {\n\t\tclear_canvas();\n\t\tif (value_img) {\n\t\t\tdraw_cropped_image();\n\t\t}\n\t\tif (lines.length == 0) {\n\t\t\tdispatch(\"clear\");\n\t\t}\n\t\tline_count = lines.length;\n\t\tdraw_lines({ lines: lines }, true);\n\t\ttrigger_on_change();\n\t}\n\n\tfunction redraw_image(_lines) {\n\t\tclear_canvas();\n\n\t\tif (value_img) {\n\t\t\tif (source === \"webcam\") {\n\t\t\t\tctx.temp.save();\n\t\t\t\tctx.temp.translate(width, 0);\n\t\t\t\tctx.temp.scale(-1, 1);\n\t\t\t\tctx.temp.drawImage(value_img, 0, 0);\n\t\t\t\tctx.temp.restore();\n\t\t\t} else {\n\t\t\t\tdraw_cropped_image();\n\t\t\t}\n\n\t\t\tif (!lines || !lines.length) {\n\t\t\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\t\t\t}\n\t\t}\n\n\t\tdraw_lines({ lines: _lines });\n\t\tline_count = _lines.length;\n\n\t\tlines = _lines;\n\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\tif (lines.length == 0) {\n\t\t\tdispatch(\"clear\");\n\t\t}\n\t}\n\n\texport function clear_mask() {\n\t\tconst _lines = [];\n\n\t\tredraw_image(_lines);\n\t\ttrigger_on_change();\n\t}\n\n\texport function undo() {\n\t\tconst _lines = lines.slice(0, -1);\n\n\t\tredraw_image(_lines);\n\t\ttrigger_on_change();\n\t}\n\n\tlet get_save_data = () => {\n\t\treturn JSON.stringify({\n\t\t\tlines: lines,\n\t\t\twidth: canvas_width,\n\t\t\theight: canvas_height,\n\t\t});\n\t};\n\n\tlet draw_lines = ({ lines }) => {\n\t\tconst brushMain = brush_color;\n\t\tlines.forEach((line) => {\n\t\t\tconst { points: _points, brush_color, brush_radius } = line;\n\n\t\t\tif (mode === \"mask\") {\n\t\t\t\tdraw_points({\n\t\t\t\t\tpoints: _points,\n\t\t\t\t\tbrush_color: brushMain,\n\t\t\t\t\tbrush_radius,\n\t\t\t\t\tmask: mode === \"mask\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdraw_points({\n\t\t\t\t\tpoints: _points,\n\t\t\t\t\tbrush_color,\n\t\t\t\t\tbrush_radius,\n\t\t\t\t\tmask: mode === \"mask\",\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tsaveLine({ brush_color, brush_radius });\n\t\tif (mode === \"mask\") {\n\t\t\tsave_mask_line();\n\t\t}\n\t};\n\n\tlet draw_line = ({ start, end, brush_color, brush_radius }) => {\n\t\tctx.temp.beginPath();\n\t\tctx.temp.moveTo(start.x, start.y);\n\t\tctx.temp.lineTo(end.x, end.y);\n\t\tctx.temp.strokeStyle = brush_color;\n\t\tctx.temp.lineWidth = brush_radius;\n\t\tctx.temp.stroke();\n\n\t\t// Save the line as two points in the lines array\n\t\tconst newLine = {\n\t\t\tpoints: [start, end],\n\t\t\tbrush_color: brush_color,\n\t\t\tbrush_radius: brush_radius,\n\t\t};\n\n\t\tlines.push(newLine);\n\t\tline_count += 1;\n\t\tsaveLine();\n\t};\n\n\tlet handle_draw_start = (e) => {\n\t\te.preventDefault();\n\t\tconst { x, y } = get_pointer_pos(e);\n\n\t\twindow.isDrawing = true;\n\t\tif (!e.touches && e.button !== 0) return;\n\n\t\tlet drawStraightLine = window.drawStraightLine || false;\n\t\tif (drawStraightLine === false || (lines.length === 0 && !lineStartPoint)) {\n\t\t\tlineStartPoint = null;\n\t\t}\n\t\tif (drawStraightLine) {\n\t\t\tif (lineStartPoint === null) {\n\t\t\t\tlineStartPoint = { x, y };\n\t\t\t} else {\n\t\t\t\tdraw_line({\n\t\t\t\t\tstart: lineStartPoint,\n\t\t\t\t\tend: { x, y },\n\t\t\t\t\tbrush_color,\n\t\t\t\t\tbrush_radius,\n\t\t\t\t});\n\t\t\t\tlineStartPoint = { x, y };\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tcolorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\n\t\tif (colorPickerEnabled && mode !== \"mask\") {\n\t\t\tbrush_color = getPixelColor(x, y);\n\t\t\tconst brush_color_hex = rgbToHex(brush_color);\n\t\t\tbrush_color_store.set(brush_color_hex);\n\t\t\tlocalStorage.setItem(\"colorPickerEnable\", \"false\");\n\t\t\treturn;\n\t\t}\n\n\t\tis_pressing = true;\n\t\tif (e.touches && e.touches.length > 0) {\n\t\t\tlazy.update({ x, y }, { both: true });\n\t\t}\n\t\thandle_pointer_move(x, y);\n\t\tline_count += 1;\n\t};\n\n\tlet handle_draw_move = (e) => {\n\t\te.preventDefault();\n\n\t\tif (localStorage.getItem(\"fillCanvasBrushColor\") === \"true\") {\n\t\t\tfill_canvas_color();\n\t\t\tlocalStorage.setItem(\"fillCanvasBrushColor\", false);\n\t\t}\n\n\t\tconst { x, y } = get_pointer_pos(e);\n\t\tposX = x;\n\t\tposY = y;\n\t\thandle_pointer_move(x, y);\n\t};\n\n\tlet handle_draw_end = (e) => {\n\t\te.preventDefault();\n\t\thandle_draw_move(e);\n\t\tis_drawing = false;\n\t\tis_pressing = false;\n\t\tsaveLine();\n\n\t\tif (mode === \"mask\") {\n\t\t\tsave_mask_line();\n\t\t}\n\t};\n\n\tlet old_width = 0;\n\tlet old_height = 0;\n\tlet old_container_height = 0;\n\tlet add_lr_border = false;\n\n\tlet handle_canvas_resize = async () => {\n\t\tif (shape && canvas_container) {\n\t\t\tconst x = canvas_container?.getBoundingClientRect();\n\t\t\tconst shape_ratio = shape[0] / shape[1];\n\t\t\tconst container_ratio = x.width / x.height;\n\t\t\tadd_lr_border = shape_ratio < container_ratio;\n\t\t}\n\n\t\tif (\n\t\t\twidth === old_width &&\n\t\t\theight === old_height &&\n\t\t\told_container_height === container_height\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst dimensions = { width: width, height: height };\n\n\t\tconst container_dimensions = {\n\t\t\theight: container_height,\n\t\t\twidth: container_height * (dimensions.width / dimensions.height),\n\t\t};\n\n\t\tawait Promise.all([\n\t\t\tset_canvas_size(canvas.interface, dimensions, container_dimensions),\n\t\t\tset_canvas_size(canvas.drawing, dimensions, container_dimensions),\n\t\t\tset_canvas_size(canvas.temp, dimensions, container_dimensions),\n\t\t\tset_canvas_size(canvas.mask, dimensions, container_dimensions, false),\n\t\t]);\n\n\t\tif (!brush_radius) {\n\t\t\tbrush_radius = 20 * (dimensions.width / container_dimensions.width);\n\t\t}\n\n\t\tloop({ once: true });\n\n\t\tsetTimeout(() => {\n\t\t\told_height = height;\n\t\t\told_width = width;\n\t\t\told_container_height = container_height;\n\t\t}, 10);\n\t\tawait tick();\n\n\t\tclear();\n\t};\n\n\t$: {\n\t\tif (lazy) {\n\t\t\tinit();\n\t\t\tlazy.setRadius(brush_radius * 0.05);\n\t\t}\n\t}\n\n\t$: {\n\t\tif (width || height) {\n\t\t\thandle_canvas_resize();\n\t\t}\n\t}\n\n\tlet set_canvas_size = async (canvas, dimensions, container, scale = true) => {\n\t\tif (!mounted) return;\n\t\tawait tick();\n\n\t\tconst dpr = window.devicePixelRatio || 1;\n\t\tcanvas.width = dimensions.width * (scale ? dpr : 1);\n\t\tcanvas.height = dimensions.height * (scale ? dpr : 1);\n\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\tscale && ctx.scale(dpr, dpr);\n\n\t\tcanvas.style.width = `${container.width}px`;\n\t\tcanvas.style.height = `${container.height}px`;\n\t};\n\n\tlet get_pointer_pos = (e) => {\n\t\tconst rect = canvas.interface.getBoundingClientRect();\n\n\t\tlet clientX = e.clientX;\n\t\tlet clientY = e.clientY;\n\t\tif (e.changedTouches && e.changedTouches.length > 0) {\n\t\t\tclientX = e.changedTouches[0].clientX;\n\t\t\tclientY = e.changedTouches[0].clientY;\n\t\t}\n\n\t\treturn {\n\t\t\tx: ((clientX - rect.left) / rect.width) * width,\n\t\t\ty: ((clientY - rect.top) / rect.height) * height,\n\t\t};\n\t};\n\n\tfunction toggleColorPicker() {\n\t\tcolorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\n\t\tif (colorPickerEnabled && mode !== \"mask\") {\n\t\t\tfor (const key in canvas) {\n\t\t\t\tcanvas[key].style.cursor = \"crosshair\";\n\t\t\t}\n\t\t} else {\n\t\t\tfor (const key in canvas) {\n\t\t\t\tcanvas[key].style.cursor = \"none\";\n\t\t\t}\n\t\t}\n\t}\n\n\tlet handle_pointer_move = (x, y) => {\n\t\tcolorPickerEnabled = localStorage.getItem(\"colorPickerEnable\") === \"true\";\n\t\ttoggleColorPicker();\n\t\tif (colorPickerEnabled && mode !== \"mask\") {\n\t\t\treturn;\n\t\t}\n\t\tlazy.update({ x: x, y: y });\n\t\tconst is_disabled = !lazy.isEnabled();\n\t\tif ((is_pressing && !is_drawing) || (is_disabled && is_pressing)) {\n\t\t\tis_drawing = true;\n\t\t\tpoints.push(lazy.brush.toObject());\n\t\t}\n\t\tif (is_drawing) {\n\t\t\tpoints.push(lazy.brush.toObject());\n\t\t\tdraw_points({\n\t\t\t\tpoints: points,\n\t\t\t\tbrush_color,\n\t\t\t\tbrush_radius,\n\t\t\t\tmask: mode === \"mask\",\n\t\t\t});\n\t\t}\n\t\tmouse_has_moved = true;\n\t};\n\n\tlet draw_points = ({ points, brush_color, brush_radius, mask }) => {\n\t\tif (!points || points.length < 2) return;\n\t\tlet target_ctx = mask ? ctx.mask : ctx.temp;\n\t\ttarget_ctx.lineJoin = \"round\";\n\t\ttarget_ctx.lineCap = \"round\";\n\n\t\ttarget_ctx.strokeStyle = brush_color;\n\t\ttarget_ctx.lineWidth = brush_radius;\n\t\tlet p1 = points[0];\n\t\tlet p2 = points[1];\n\t\ttarget_ctx.moveTo(p2.x, p2.y);\n\t\ttarget_ctx.beginPath();\n\t\tfor (var i = 1, len = points.length; i < len; i++) {\n\t\t\tvar midPoint = mid_point(p1, p2);\n\t\t\ttarget_ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n\t\t\tp1 = points[i];\n\t\t\tp2 = points[i + 1];\n\t\t}\n\n\t\ttarget_ctx.lineTo(p1.x, p1.y);\n\t\ttarget_ctx.stroke();\n\t};\n\t// help funcs\n\tfunction getBrightness(hexColor) {\n\t\tconst rgbColor = hexToRgb(hexColor);\n\t\tif (rgbColor) {\n\t\t\tconst { r, g, b } = rgbColor;\n\t\t\treturn (r * 299 + g * 587 + b * 114) / 1000;\n\t\t}\n\t\treturn 0;\n\t}\n\tfunction getPixelColor(x, y) {\n\t\tconst imageData = ctx.drawing.getImageData(x - 1, y, 1, 1);\n\t\tconst [r, g, b, a] = imageData.data;\n\t\treturn `rgb(${r}, ${g}, ${b})`;\n\t}\n\tfunction hexToRgb(hex) {\n\t\tconst result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\treturn result\n\t\t\t? {\n\t\t\t\t\tr: parseInt(result[1], 16),\n\t\t\t\t\tg: parseInt(result[2], 16),\n\t\t\t\t\tb: parseInt(result[3], 16),\n\t\t\t  }\n\t\t\t: null;\n\t}\n\tfunction rgbToHex(rgbString) {\n\t\t// Extracting r, g, b values from a string\n\t\tconst [r, g, b] = rgbString\n\t\t\t.match(/\\d+/g) // Find all the numbers in the string\n\t\t\t.map(Number); // Convert each group of digits to a numeric value\n\t\t// Function to convert a number to a two-digit hexadecimal value\n\t\tfunction toHex(num) {\n\t\t\tconst hex = num.toString(16);\n\t\t\treturn hex.length === 1 ? `0${hex}` : hex;\n\t\t}\n\t\t// Convert each r, g, b value to hexadecimal format and combine them\n\t\treturn `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n\t}\n\t// end\n\n\tfunction fill_canvas_color() {\n\t\tif (mode === \"mask\") {\n\t\t\treturn;\n\t\t}\n\t\tctx.temp.fillStyle = brush_color;\n\t\tctx.temp.fillRect(0, 0, width, height);\n\t\tvar startX = 0; // start point of the line (x-coordinate)\n\t\tvar startY = height / 2; // start point of the line (y-coordinate)\n\t\tvar endX = width; // end point of the line (x-coordinate)\n\t\tvar endY = height / 2; // end point of the line (y-coordinate)\n\t\tctx.drawing.beginPath();\n\t\tctx.drawing.moveTo(startX, startY);\n\t\tctx.drawing.lineTo(endX, endY);\n\t\tctx.drawing.strokeStyle = brush_color;\n\t\tctx.drawing.lineWidth = height; // make the line height of the canvas\n\t\tctx.drawing.stroke();\n\t\t// Save line as two points in the lines array\n\t\tlines = [\n\t\t\t{\n\t\t\t\tpoints: [\n\t\t\t\t\t{ x: startX, y: startY },\n\t\t\t\t\t{ x: endX, y: endY },\n\t\t\t\t],\n\t\t\t\tbrush_color: brush_color,\n\t\t\t\tbrush_radius: height,\n\t\t\t},\n\t\t];\n\t\tline_count = 1;\n\t\tsaveLine();\n\t}\n\n\tlet save_mask_line = () => {\n\t\tif (points.length < 1) return;\n\t\tpoints.length = 0;\n\n\t\ttrigger_on_change();\n\t};\n\n\tlet saveLine = () => {\n\t\tif (points.length < 1) return;\n\n\t\tlines.push({\n\t\t\tpoints: points.slice(),\n\t\t\tbrush_color: brush_color,\n\t\t\tbrush_radius,\n\t\t});\n\n\t\tif (mode !== \"mask\") {\n\t\t\tpoints.length = 0;\n\t\t}\n\n\t\tctx.drawing.drawImage(canvas.temp, 0, 0, width, height);\n\n\t\ttrigger_on_change();\n\t};\n\n\tlet trigger_on_change = () => {\n\t\tconst x = get_image_data();\n\t\tdispatch(\"change\", x);\n\t};\n\n\texport function clear() {\n\t\tlines = [];\n\t\tclear_canvas();\n\t\tline_count = 0;\n\n\t\treturn true;\n\t}\n\n\tfunction clear_canvas() {\n\t\tvalues_changed = true;\n\t\tctx.temp.clearRect(0, 0, width, height);\n\n\t\tctx.temp.fillStyle = mode === \"mask\" ? \"transparent\" : \"#FFFFFF\";\n\t\tctx.temp.fillRect(0, 0, width, height);\n\n\t\tif (mode === \"mask\") {\n\t\t\tctx.mask.clearRect(0, 0, canvas.mask.width, canvas.mask.height);\n\t\t}\n\t}\n\n\tlet loop = ({ once = false } = {}) => {\n\t\tif (mouse_has_moved || values_changed) {\n\t\t\tconst pointer = lazy.getPointerCoordinates();\n\t\t\tconst brush = lazy.getBrushCoordinates();\n\t\t\tdraw_interface(ctx.interface, pointer, brush);\n\t\t\tmouse_has_moved = false;\n\t\t\tvalues_changed = false;\n\t\t}\n\t\tif (!once) {\n\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\tloop();\n\t\t\t});\n\t\t}\n\t};\n\n\t$: brush_dot = brush_radius * 0.075;\n\n\tlet draw_interface = (ctx, pointer, brush) => {\n\t\tctx.clearRect(0, 0, width, height);\n\n\t\tlet brushX = brush.x;\n\t\tlet brushY = brush.y;\n\t\tif (posX && posY) {\n\t\t\tbrushX = posX;\n\t\t\tbrushY = posY;\n\t\t}\n\n\t\t// brush preview\n\t\tctx.beginPath();\n\t\tctx.fillStyle = brush_color;\n\t\tconst brushOutlineEnabled = localStorage.getItem(\"brushOutline\") === \"true\";\n\t\tif (brushOutlineEnabled) {\n\t\t\tconst brightness = getBrightness(brush_color);\n\t\t\tctx.strokeStyle = brightness > 128 ? \"black\" : \"white\"; // Change the strokeStyle based on brightness\n\t\t\tif (brush_radius > 180) {\n\t\t\t\tctx.lineWidth = 4;\n\t\t\t} else if (brush_radius > 80) {\n\t\t\t\tctx.lineWidth = 3; // Change the value to control the thickness of the border\n\t\t\t} else if (brush_radius > 20) {\n\t\t\t\tctx.lineWidth = 2; // Change the value to control the thickness of the border\n\t\t\t} else {\n\t\t\t\tctx.lineWidth = 1;\n\t\t\t}\n\t\t}\n\n\t\tctx.arc(brushX, brushY, brush_radius / 2, 0, Math.PI * 2, true);\n\t\tctx.fill();\n\n\t\tif (brushOutlineEnabled) {\n\t\t\tctx.stroke(); // Main Point Boundary\n\t\t}\n\n\t\t// tiny brush point dot\n\t\tctx.beginPath();\n\t\tctx.fillStyle = catenary_color;\n\t\tctx.arc(brushX, brushY, brush_dot, 0, Math.PI * 2, true);\n\t\tctx.fill();\n\t};\n\n\texport function get_image_data() {\n\t\treturn mode === \"mask\"\n\t\t\t? canvas.mask.toDataURL(\"image/png\")\n\t\t\t: canvas.drawing.toDataURL(\"image/jpg\");\n\t}\n</script>\n\n<div\n\tclass=\"wrap\"\n\tbind:this={canvas_container}\n\tbind:offsetWidth={canvas_width}\n\tbind:offsetHeight={canvas_height}\n>\n\t{#if line_count === 0}\n\t\t<div transition:fade={{ duration: 50 }} class=\"start-prompt\">\n\t\t\tStart drawing\n\t\t</div>\n\t{/if}\n\t{#each canvas_types as { name, zIndex, opacity }}\n\t\t<canvas\n\t\t\tkey={name}\n\t\t\tstyle=\" z-index:{zIndex};\"\n\t\t\tstyle:opacity\n\t\t\tclass:lr={add_lr_border}\n\t\t\tclass:tb={!add_lr_border}\n\t\t\tbind:this={canvas[name]}\n\t\t\ton:mousedown={name === \"interface\" ? handle_draw_start : undefined}\n\t\t\ton:mousemove={name === \"interface\" ? handle_draw_move : undefined}\n\t\t\ton:mouseup={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:mouseout={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:mouseout={name === \"interface\"\n\t\t\t\t? () => {\n\t\t\t\t\t\tposX = posY = 0;\n\t\t\t\t\t\tlocalStorage.setItem(\"overCanvas\", \"false\");\n\t\t\t\t  }\n\t\t\t\t: undefined}\n\t\t\ton:blur={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:touchstart={name === \"interface\" ? handle_draw_start : undefined}\n\t\t\ton:touchmove={name === \"interface\" ? handle_draw_move : undefined}\n\t\t\ton:touchend={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:touchcancel={name === \"interface\" ? handle_draw_end : undefined}\n\t\t\ton:click|stopPropagation\n\t\t/>\n\t{/each}\n</div>\n\n<style>\n\tcanvas {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0px;\n\t\tright: 0px;\n\t\tbottom: 0px;\n\t\tleft: 0px;\n\t\tmargin: auto;\n\t}\n\n\t.lr {\n\t\tborder-right: 1px solid var(--border-color-primary);\n\t\tborder-left: 1px solid var(--border-color-primary);\n\t}\n\n\t.tb {\n\t\tborder-top: 1px solid var(--border-color-primary);\n\t\tborder-bottom: 1px solid var(--border-color-primary);\n\t}\n\n\tcanvas:hover {\n\t\tcursor: none;\n\t}\n\n\tcanvas:not(.color-picker-enabled):hover {\n\t\tcursor: none;\n\t}\n\n\tcanvas.color-picker-enabled:hover {\n\t\tcursor: crosshair;\n\t}\n\n\t.wrap {\n\t\tposition: relative;\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\ttouch-action: none;\n\t}\n\n\t.start-prompt {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 0px;\n\t\tright: 0px;\n\t\tbottom: 0px;\n\t\tleft: 0px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: var(--layer-4);\n\t\ttouch-action: none;\n\t\tpointer-events: none;\n\t\tcolor: var(--body-text-color-subdued);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { IconButton } from \"@gradio/atoms\";\n\timport { Undo, Clear, Copy, Erase } from \"@gradio/icons\";\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<div>\n\t<IconButton Icon={Undo} label=\"Undo\" on:click={() => dispatch(\"undo\")} />\n\t<span class=\"hide_redraw\">\n\t\t<IconButton\n\t\t\tIcon={Copy}\n\t\t\tlabel=\"Redraw\"\n\t\t\ton:click={() => dispatch(\"redraw\")}\n\t\t/>\n\t</span>\n\n\t{#if true}\n\t\t<IconButton\n\t\t\tIcon={Erase}\n\t\t\tlabel=\"Clear\"\n\t\t\ton:click={(event) => {\n\t\t\t\tdispatch(\"clear_mask\");\n\t\t\t\tevent.stopPropagation();\n\t\t\t}}\n\t\t/>\n\t{/if}\n\n\t<IconButton\n\t\tIcon={Clear}\n\t\tlabel=\"Remove Image\"\n\t\ton:click={(event) => {\n\t\t\tdispatch(\"remove_image\");\n\t\t\tevent.stopPropagation();\n\t\t}}\n\t/>\n</div>\n\n<style>\n\tdiv {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: var(--size-2);\n\t\tright: var(--size-2);\n\t\tjustify-content: flex-end;\n\t\tgap: var(--spacing-sm);\n\t\tz-index: var(--layer-5);\n\t}\n\n\t.hide_redraw {\n\t\tdisplay: none;\n\t}\n</style>","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { IconButton } from \"@gradio/atoms\";\n\timport { Brush, Color } from \"@gradio/icons\";\n\timport { brush_color_store } from \"./Brushcolor\";\n\n\tconst dispatch = createEventDispatcher();\n\tlet show_size = false;\n\tlet show_col = false;\n\n\texport let brush_radius = 20;\n\texport let container_height: number;\n\texport let img_width: number;\n\texport let img_height: number;\n\texport let mode: \"mask\" | \"other\" = \"other\";\n\texport let brush_color = \"#000\";\n\n\tbrush_color_store.subscribe(($brush_color) => {\n\t\tbrush_color = $brush_color;\n\t});\n\n\t$: width = container_height * (img_width / img_height);\n</script>\n\n<div class=\"wrap\">\n\t<span class=\"brush\">\n\t\t<IconButton\n\t\t\tIcon={Brush}\n\t\t\tlabel=\"Use brush\"\n\t\t\ton:click={() => (show_size = !show_size)}\n\t\t/>\n\t\t{#if show_size}\n\t\t\t<input\n\t\t\t\taria-label=\"Brush radius\"\n\t\t\t\tbind:value={brush_radius}\n\t\t\t\ttype=\"range\"\n\t\t\t\tmin={0.5 * (img_width / width)}\n\t\t\t\tmax={75 * (img_width / width)}\n\t\t\t/>\n\t\t{/if}\n\t</span>\n\n\t{#if true}\n\t\t<span class=\"col\">\n\t\t\t<IconButton\n\t\t\t\tIcon={Color}\n\t\t\t\tlabel=\"Select brush color\"\n\t\t\t\ton:click={() => (show_col = !show_col)}\n\t\t\t/>\n\t\t\t{#if show_col}\n\t\t\t\t<input\n\t\t\t\t\taria-label=\"Brush color\"\n\t\t\t\t\ton:change={() => {\n\t\t\t\t\t\tif (mode === \"mask\") dispatch(\"redraw\");\n\t\t\t\t\t}}\n\t\t\t\t\tbind:value={brush_color}\n\t\t\t\t\ttype=\"color\"\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t</span>\n\t{/if}\n</div>\n\n<style>\n\t.wrap {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: var(--size-10);\n\t\tright: var(--size-2);\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t\tgap: var(--spacing-sm);\n\t\tz-index: var(--layer-5);\n\t}\n\t.brush {\n\t\ttop: 0;\n\t\tright: 0;\n\t}\n\n\t.brush input {\n\t\tposition: absolute;\n\t\ttop: 3px;\n\t\tright: calc(100% + 5px);\n\t}\n\n\t.col input {\n\t\tposition: absolute;\n\t\tright: calc(100% + 5px);\n\t\tbottom: -4px;\n\t}\n</style>","<script lang=\"ts\">\n\t// @ts-nocheck\n\timport { createEventDispatcher, tick, onMount } from \"svelte\";\n\timport { BlockLabel } from \"@gradio/atoms\";\n\timport { Image, Sketch as SketchIcon } from \"@gradio/icons\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\n\n\timport Cropper from \"./Cropper.svelte\";\n\timport Sketch from \"./Sketch.svelte\";\n\timport Webcam from \"./Webcam.svelte\";\n\timport ModifySketch from \"./ModifySketch.svelte\";\n\timport SketchSettings from \"./SketchSettings.svelte\";\n\timport { Upload, ModifyUpload } from \"@gradio/upload\";\n\n\texport let value:\n\t\t| null\n\t\t| string\n\t\t| { image: string | null; mask: string | null };\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\n\texport let tool: \"editor\" | \"select\" | \"sketch\" | \"color-sketch\" = \"editor\";\n\texport let shape: [number, number];\n\texport let streaming: boolean = false;\n\texport let pending: boolean = false;\n\texport let mirror_webcam: boolean;\n\texport let brush_radius: number;\n\texport let selectable: boolean = false;\n\n\texport let mask_opacity;\n\n\tlet sketch: Sketch;\n\tlet cropper: Cropper;\n\n\tlet prevValue = \"\";\n\tlet isUpload = false;\n\n\tif (\n\t\tvalue &&\n\t\t(source === \"upload\" || source === \"webcam\") &&\n\t\ttool === \"sketch\"\n\t) {\n\t\tvalue = { image: value as string, mask: null };\n\t}\n\n\tfunction handle_upload({ detail }: CustomEvent<string>) {\n\t\tif (tool === \"color-sketch\") {\n\t\t\tstatic_image = detail;\n\t\t} else {\n\t\t\tvalue =\n\t\t\t\t(source === \"upload\" || source === \"webcam\") && tool === \"sketch\"\n\t\t\t\t\t? { image: detail, mask: null }\n\t\t\t\t\t: detail;\n\t\t}\n\t\tisUpload = true;\n\t\tlocalStorage.setItem(\"resetLines\", \"true\");\n\t\tdispatch(\"upload\", detail);\n\t}\n\n\tfunction handle_clear({ detail }: CustomEvent<null>) {\n\t\tvalue = null;\n\t\tstatic_image = undefined;\n\t\tdispatch(\"clear\");\n\t}\n\n\tasync function handle_save(\n\t\t{ detail }: { detail: string },\n\t\tinitial,\n\t\tchange = false\n\t) {\n\t\tif (mode === \"mask\") {\n\t\t\tif (source === \"webcam\" && initial) {\n\t\t\t\tvalue = {\n\t\t\t\t\timage: detail,\n\t\t\t\t\tmask: null\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tvalue = {\n\t\t\t\t\timage: typeof value === \"string\" ? value : value?.image || null,\n\t\t\t\t\tmask: detail\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (\n\t\t\t(source === \"upload\" || source === \"webcam\") &&\n\t\t\ttool === \"sketch\"\n\t\t) {\n\t\t\tvalue = { image: detail, mask: null };\n\t\t} else {\n\t\t\tif (prevValue === \"\") {\n\t\t\t\tprevValue = detail;\n\t\t\t}\n\t\t\tvalue = detail;\n\t\t}\n\t\tawait tick();\n\t\tdispatch(streaming ? \"stream\" : \"edit\");\n\t}\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string | null;\n\t\tstream: string | null;\n\t\tedit: undefined;\n\t\tclear: undefined;\n\t\tdrag: boolean;\n\t\tupload: FileData;\n\t\tselect: SelectData;\n\t}>();\n\n\t$: dispatch(\"change\", value as string);\n\n\tlet dragging = false;\n\n\t$: dispatch(\"drag\", dragging);\n\n\tfunction handle_image_load(event: Event) {\n\t\tconst element = event.currentTarget as HTMLImageElement;\n\t\timg_width = element.naturalWidth;\n\t\timg_height = element.naturalHeight;\n\t\tcontainer_height = element.getBoundingClientRect().height;\n\t}\n\n\tasync function handle_sketch_clear() {\n\t\tsketch.clear();\n\t\tawait tick();\n\t\tvalue = null;\n\t\tstatic_image = undefined;\n\t\tprevValue = \"\";\n\t\tisUpload = false;\n\t}\n\n\tasync function handle_mask_clear() {\n\t\tsketch.clear_mask();\n\t\tawait tick();\n\t}\n\n\tlet img_height = 0;\n\tlet img_width = 0;\n\tlet container_height = 0;\n\n\tlet mode;\n\n\t$: {\n\t\tif (source === \"canvas\" && tool === \"sketch\") {\n\t\t\tmode = \"bw-sketch\";\n\t\t} else if (tool === \"color-sketch\") {\n\t\t\tmode = \"color-sketch\";\n\t\t} else if (\n\t\t\t(source === \"upload\" || source === \"webcam\") &&\n\t\t\ttool === \"sketch\"\n\t\t) {\n\t\t\tmode = \"mask\";\n\t\t} else {\n\t\t\tmode = \"editor\";\n\t\t}\n\t}\n\n\t$: brush_color = mode == \"mask\" ? \"#000000\" : \"#000\";\n\n\tlet value_img;\n\tlet max_height;\n\tlet max_width;\n\n\tlet static_image = undefined;\n\n\t$: {\n\t\tif (value === null || (value.image === null && value.mask === null)) {\n\t\t\tstatic_image = undefined;\n\t\t}\n\t}\n\n\t$: {\n\t\tif (cropper) {\n\t\t\tif (value) {\n\t\t\t\tcropper.image = value;\n\t\t\t\tcropper.create();\n\t\t\t} else {\n\t\t\t\tcropper.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\tonMount(async () => {\n\t\tif (tool === \"color-sketch\" && value && typeof value === \"string\") {\n\t\t\tstatic_image = value;\n\t\t\tawait tick();\n\t\t\thandle_image_load({ currentTarget: value_img });\n\t\t}\n\t});\n\n\tconst handle_click = (evt: MouseEvent) => {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t};\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={source === \"canvas\" ? SketchIcon : Image}\n\tlabel={label || (source === \"canvas\" ? \"Sketch\" : \"Image\")}\n/>\n\n<div\n\tclass=\"image-container\"\n\tdata-testid=\"image\"\n\tbind:offsetHeight={max_height}\n\tbind:offsetWidth={max_width}\n>\n\t{#if source === \"upload\"}\n\t\t<Upload\n\t\t\tbind:dragging\n\t\t\tfiletype=\"image/*\"\n\t\t\ton:load={handle_upload}\n\t\t\tinclude_file_metadata={false}\n\t\t\tdisable_click={!!value}\n\t\t>\n\t\t\t{#if (value === null && !static_image) || streaming}\n\t\t\t\t<slot />\n\t\t\t{:else if tool === \"select\"}\n\t\t\t\t<Cropper bind:this={cropper} image={value} on:crop={handle_save} />\n\t\t\t\t<ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\n\t\t\t{:else if tool === \"editor\"}\n\t\t\t\t<ModifyUpload\n\t\t\t\t\ton:edit={() => (tool = \"select\")}\n\t\t\t\t\ton:clear={handle_clear}\n\t\t\t\t\teditable\n\t\t\t\t/>\n\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\n\t\t\t\t<img\n\t\t\t\t\tsrc={value}\n\t\t\t\t\talt=\"\"\n\t\t\t\t\tclass:scale-x-[-1]={source === \"webcam\" && mirror_webcam}\n\t\t\t\t\tclass:selectable\n\t\t\t\t\ton:click={handle_click}\n\t\t\t\t/>\n\t\t\t{:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\n\t\t\t\t{#key static_image}\n\t\t\t\t\t<img\n\t\t\t\t\t\tbind:this={value_img}\n\t\t\t\t\t\tclass=\"absolute-img\"\n\t\t\t\t\t\tsrc={static_image || value?.image || value}\n\t\t\t\t\t\tdata-source={prevValue}\n\t\t\t\t\t\tdata-isupload={isUpload}\n\t\t\t\t\t\talt=\"load-2\"\n\t\t\t\t\t\ton:load={handle_image_load}\n\t\t\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\n\t\t\t\t\t/>\n\t\t\t\t{/key}\n\t\t\t\t{#if img_width > 0}\n\t\t\t\t\t<Sketch\n\t\t\t\t\t\t{value}\n\t\t\t\t\t\tbind:this={sketch}\n\t\t\t\t\t\tbind:brush_radius\n\t\t\t\t\t\tbind:brush_color\n\t\t\t\t\t\ton:change={handle_save}\n\t\t\t\t\t\ton:redraw={sketch.redraw()}\n\t\t\t\t\t\t{mask_opacity}\n\t\t\t\t\t\t{mode}\n\t\t\t\t\t\twidth={img_width || max_width}\n\t\t\t\t\t\theight={img_height || max_height}\n\t\t\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\t\t\t{value_img}\n\t\t\t\t\t\t{source}\n\t\t\t\t\t\t{shape}\n\t\t\t\t\t/>\n\t\t\t\t\t<ModifySketch\n\t\t\t\t\t\ton:undo={() => sketch.undo()}\n\t\t\t\t\t\ton:redraw={() => sketch.redraw()}\n\t\t\t\t\t\ton:clear_mask={handle_mask_clear}\n\t\t\t\t\t\ton:remove_image={handle_sketch_clear}\n\t\t\t\t\t/>\n\t\t\t\t\t{#if tool === \"color-sketch\" || tool === \"sketch\"}\n\t\t\t\t\t\t<SketchSettings\n\t\t\t\t\t\t\tbind:brush_radius\n\t\t\t\t\t\t\tbind:brush_color\n\t\t\t\t\t\t\ton:redraw={sketch.redraw()}\n\t\t\t\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\t\t\t\timg_width={img_width || max_width}\n\t\t\t\t\t\t\timg_height={img_height || max_height}\n\t\t\t\t\t\t\t{mode}\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t{:else}\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t\t\t<img\n\t\t\t\t\tsrc={value.image || value}\n\t\t\t\t\talt=\"hello\"\n\t\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\n\t\t\t\t\tclass:selectable\n\t\t\t\t\ton:click={handle_click}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t</Upload>\n\t{:else if source === \"canvas\"}\n\t\t<ModifySketch\n\t\t\ton:undo={() => sketch.undo()}\n\t\t\ton:redraw={() => sketch.redraw()}\n\t\t\ton:clear={handle_sketch_clear}\n\t\t\ton:remove_image={handle_sketch_clear}\n\t\t/>\n\t\t{#if tool === \"color-sketch\"}\n\t\t\t<SketchSettings\n\t\t\t\tbind:brush_radius\n\t\t\t\tbind:brush_color\n\t\t\t\ton:redraw={sketch.redraw()}\n\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\timg_width={img_width || max_width}\n\t\t\t\timg_height={img_height || max_height}\n\t\t\t/>\n\t\t{/if}\n\t\t<Sketch\n\t\t\t{value}\n\t\t\tbind:brush_radius\n\t\t\tbind:brush_color\n\t\t\tbind:this={sketch}\n\t\t\ton:change={handle_save}\n\t\t\ton:clear={handle_sketch_clear}\n\t\t\t{mode}\n\t\t\twidth={img_width || max_width}\n\t\t\theight={img_height || max_height}\n\t\t\tcontainer_height={container_height || max_height}\n\t\t\t{shape}\n\t\t/>\n\t{:else if (value === null && !static_image) || streaming}\n\t\t{#if source === \"webcam\" && !static_image}\n\t\t\t<Webcam\n\t\t\t\ton:capture={(e) =>\n\t\t\t\t\ttool === \"color-sketch\"\n\t\t\t\t\t\t? handle_upload(e)\n\t\t\t\t\t\t: handle_save(e, true, \"\")}\n\t\t\t\ton:stream={handle_save}\n\t\t\t\ton:error\n\t\t\t\t{streaming}\n\t\t\t\t{pending}\n\t\t\t\t{mirror_webcam}\n\t\t\t/>\n\t\t{/if}\n\t{:else if tool === \"select\"}\n\t\t<Cropper bind:this={cropper} image={value} on:crop={handle_save} />\n\t\t<ModifyUpload on:clear={(e) => (handle_clear(e), (tool = \"editor\"))} />\n\t{:else if tool === \"editor\"}\n\t\t<ModifyUpload\n\t\t\ton:edit={() => (tool = \"select\")}\n\t\t\ton:clear={handle_clear}\n\t\t\teditable\n\t\t/>\n\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t<img\n\t\t\tsrc={value}\n\t\t\talt=\"\"\n\t\t\tclass:selectable\n\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\n\t\t\ton:click={handle_click}\n\t\t/>\n\t{:else if (tool === \"sketch\" || tool === \"color-sketch\") && (value !== null || static_image)}\n\t\t{#key static_image}\n\t\t\t<img\n\t\t\t\tbind:this={value_img}\n\t\t\t\tclass=\"absolute-img\"\n\t\t\t\tsrc={static_image || value?.image || value}\n\t\t\t\talt=\"load-1\"\n\t\t\t\ton:load={handle_image_load}\n\t\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\n\t\t\t/>\n\t\t{/key}\n\t\t{#if img_width > 0}\n\t\t\t<Sketch\n\t\t\t\t{value}\n\t\t\t\tbind:this={sketch}\n\t\t\t\tbind:brush_radius\n\t\t\t\tbind:brush_color\n\t\t\t\ton:change={handle_save}\n\t\t\t\t{mode}\n\t\t\t\twidth={img_width || max_width}\n\t\t\t\theight={img_height || max_height}\n\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\t{value_img}\n\t\t\t\t{source}\n\t\t\t/>\n\t\t\t<ModifySketch\n\t\t\t\ton:undo={() => sketch.undo()}\n\t\t\t\ton:redraw={() => sketch.redraw()}\n\t\t\t\ton:clear={handle_sketch_clear}\n\t\t\t\ton:remove_image={handle_sketch_clear}\n\t\t\t/>\n\t\t\t{#if tool === \"color-sketch\" || tool === \"sketch\"}\n\t\t\t\t<SketchSettings\n\t\t\t\t\tbind:brush_radius\n\t\t\t\t\tbind:brush_color\n\t\t\t\t\tcontainer_height={container_height || max_height}\n\t\t\t\t\timg_width={img_width || max_width}\n\t\t\t\t\timg_height={img_height || max_height}\n\t\t\t\t\t{mode}\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t{/if}\n\t{:else}\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t\t<img\n\t\t\tsrc={value.image || value}\n\t\t\talt=\"\"\n\t\t\tclass:webcam={source === \"webcam\" && mirror_webcam}\n\t\t\tclass:selectable\n\t\t\ton:click={handle_click}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t.image-container,\n\timg {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\timg {\n\t\tobject-fit: contain;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.absolute-img {\n\t\tposition: absolute;\n\t\topacity: 0;\n\t}\n\n\t.webcam {\n\t\ttransform: scaleX(-1);\n\t}\n</style>","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { BlockLabel, Empty, IconButton, ShareButton } from \"@gradio/atoms\";\n\timport { Download } from \"@gradio/icons\";\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\n\n\timport { Image } from \"@gradio/icons\";\n\n\texport let value: null | string;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\texport let show_download_button = true;\n\texport let selectable = false;\n\texport let show_share_button = false;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string;\n\t\tselect: SelectData;\n\t}>();\n\n\t$: value && dispatch(\"change\", value);\n\n\tconst handle_click = (evt: MouseEvent): void => {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t};\n</script>\n\n<BlockLabel {show_label} Icon={Image} label={label || \"Image\"} />\n{#if value === null}\n\t<Empty unpadded_box={true} size=\"large\"><Image /></Empty>\n{:else}\n\t<div class=\"icon-buttons\">\n\t\t{#if show_download_button}\n\t\t<a\n\t\t\thref={value}\n\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\n\t\t\tdownload={\"image\"}\n\t\t>\n\t\t\t<IconButton Icon={Download} label=\"Download\" />\n\t\t</a>\n\t\t{/if}\n\t\t{#if show_share_button}\n\t\t\t<ShareButton\n\t\t\t\ton:share\n\t\t\t\ton:error\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value, \"base64\");\n\t\t\t\t\treturn `<img src=\"${url}\" />`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<img src={value} alt=\"\" class:selectable on:click={handle_click} />\n{/if}\n\n<style>\n\timg {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: contain;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.icon-buttons {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 6px;\n\t\tright: 6px;\n\t\tgap: var(--size-1);\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { Image, StaticImage } from \"@gradio/image\";\n\timport { Block } from \"@gradio/atoms\";\n\timport { _ } from \"svelte-i18n\";\n\timport { Component as StatusTracker } from \"../StatusTracker/\";\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\n\timport UploadText from \"../UploadText.svelte\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let value: null | string = null;\n\texport let source: \"canvas\" | \"webcam\" | \"upload\" = \"upload\";\n\texport let tool: \"editor\" | \"select\" | \"sketch\" | \"color-sketch\" = \"editor\";\n\texport let label: string;\n\texport let show_label: boolean;\n\texport let show_download_button: boolean;\n\texport let streaming: boolean;\n\texport let pending: boolean;\n\texport let height: number | undefined;\n\texport let width: number | undefined;\n\texport let mirror_webcam: boolean;\n\texport let shape: [number, number];\n\texport let brush_radius: number;\n\texport let brush_color: string;\n\texport let mask_opacity: number;\n\texport let selectable = false;\n\texport let container = true;\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let loading_status: LoadingStatus;\n\texport let mode: \"static\" | \"dynamic\";\n\texport let show_share_button = false;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: undefined;\n\t\terror: string;\n\t}>();\n\n\t$: value, dispatch(\"change\");\n\tlet dragging: boolean;\n\tconst FIXED_HEIGHT = 240;\n\n\t$: value = !value ? null : value;\n</script>\n\n<Block\n\t{visible}\n\tvariant={mode === \"dynamic\" && value === null && source === \"upload\"\n\t\t? \"dashed\"\n\t\t: \"solid\"}\n\tborder_mode={dragging ? \"focus\" : \"base\"}\n\tpadding={false}\n\t{elem_id}\n\t{elem_classes}\n\theight={height ||\n\t\t(source === \"webcam\" || mode === \"static\" ? undefined : FIXED_HEIGHT)}\n\t{width}\n\tallow_overflow={false}\n\t{container}\n\t{scale}\n\t{min_width}\n>\n\t<StatusTracker {...loading_status} />\n\t{#if mode === \"static\"}\n\t\t<StaticImage\n\t\t\ton:select\n\t\t\ton:share\n\t\t\ton:error\n\t\t\t{value}\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{show_download_button}\n\t\t\t{selectable}\n\t\t\t{show_share_button}\n\t\t/>\n\t{:else}\n\t\t<Image\n\t\t\t{brush_radius}\n\t\t\t{brush_color}\n\t\t\t{shape}\n\t\t\tbind:value\n\t\t\t{source}\n\t\t\t{tool}\n\t\t\t{selectable}\n\t\t\t{mask_opacity}\n\t\t\ton:edit\n\t\t\ton:clear\n\t\t\ton:stream\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\ton:upload\n\t\t\ton:select\n\t\t\ton:share\n\t\t\ton:error={({ detail }) => {\n\t\t\t\tloading_status = loading_status || {};\n\t\t\t\tloading_status.status = \"error\";\n\t\t\t\tdispatch(\"error\", detail);\n\t\t\t}}\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{pending}\n\t\t\t{streaming}\n\t\t\t{mirror_webcam}\n\t\t>\n\t\t\t<UploadText type=\"image\" />\n\t\t</Image>\n\t{/if}\n</Block>\n","export { default as Component } from \"./Image.svelte\";\nexport { default as ExampleComponent } from \"../Dataset/ExampleComponents/Image.svelte\";\nexport const modes = [\"static\", \"dynamic\"];\n\nexport const document = (config: Record<string, any>) => ({\n\ttype: {\n\t\tpayload: \"string\"\n\t},\n\tdescription: {\n\t\tpayload: \"image data as base64 string\"\n\t},\n\texample_data:\n\t\t\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==\"\n});\n"],"names":["insert","target","svg","anchor","append","path0","path1","circle0","circle1","circle2","circle3","circle4","path","get_coordinates_of_clicked_image","evt","image","imageRect","xScale","yScale","displayed_height","y_offset","x","y","displayed_width","x_offset","ctx","attr","img","img_src_value","$$props","el","dispatch","createEventDispatcher","cropper","destroy","create","Cropper","image_data","$$value","Point","LazyPoint","point","angle","distance","angleRotated","diff","RADIUS_DEFAULT","LazyBrush","radius","enabled","initialPoint","newPointerPoint","both","div","div_transition","create_bidirectional_transition","fade","canvas_1","listen","is_function","if_block","create_if_block","i","catenary_color","mid_point","p1","p2","getBrightness","hexColor","rgbColor","hexToRgb","r","g","b","hex","result","rgbToHex","rgbString","toHex","num","value","value_img","mode","brush_color","brush_radius","mask_opacity","source","width","height","container_height","shape","colorPickerEnabled","posX","posY","lineStartPoint","mounted","canvas_width","canvas_height","last_value_img","canvas_types","canvas","points","lines","mouse_has_moved","values_changed","is_drawing","is_pressing","lazy","canvas_container","canvas_observer","line_count","draw_cropped_image","_width","_height","shape_ratio","image_ratio","onMount","key","tick","_","trigger_on_change","draw_lines","$$invalidate","ResizeObserver","entries","observer","rest","handle_canvas_resize","loop","init","clear","initX","initY","onDestroy","redraw","clear_canvas","redraw_image","_lines","clear_mask","undo","brushMain","line","_points","draw_points","saveLine","save_mask_line","draw_line","start","end","newLine","handle_draw_start","e","get_pointer_pos","drawStraightLine","getPixelColor","brush_color_hex","brush_color_store","handle_pointer_move","handle_draw_move","fill_canvas_color","handle_draw_end","old_width","old_height","old_container_height","add_lr_border","container_ratio","dimensions","container_dimensions","set_canvas_size","container","scale","dpr","rect","clientX","clientY","toggleColorPicker","is_disabled","mask","target_ctx","len","midPoint","imageData","a","startX","startY","endX","endY","get_image_data","once","pointer","brush","draw_interface","brushX","brushY","brushOutlineEnabled","brightness","brush_dot","name","Erase","Undo","Copy","Clear","span","dirty","event","input","Color","create_if_block_1","Brush","create_if_block_2","if_block1","show_size","show_col","img_width","img_height","$brush_color","click_handler","to_number","click_handler_1","create_if_block_14","create_if_block_10","create_if_block_8","sketch_1_changes","src_url_equal","create_if_block_15","sketchsettings_changes","create_if_block_5","create_if_block_6","SketchIcon","Image","blocklabel_changes","label","show_label","tool","streaming","pending","mirror_webcam","selectable","sketch","prevValue","isUpload","handle_upload","detail","static_image","handle_clear","handle_save","initial","change","dragging","handle_image_load","element","handle_sketch_clear","handle_mask_clear","max_height","max_width","handle_click","coordinates","clear_handler","edit_handler","undo_handler","redraw_handler","undo_handler_1","redraw_handler_1","clear_handler_1","edit_handler_1","undo_handler_2","redraw_handler_2","Download","show_download_button","show_share_button","uploadToHuggingFace","FIXED_HEIGHT","block_changes","elem_id","elem_classes","visible","min_width","loading_status","modes","document","config"],"mappings":"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","x_google_ignoreList":[6,7,8]}