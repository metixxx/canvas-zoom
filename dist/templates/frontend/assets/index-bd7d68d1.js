import{S as ae,e as oe,s as le,J as $,K as m,p as C,M as X,n as Y,A as S,ak as q,N as F,T as J,B as Ce,h as j,G as ct,O as P,Z as at,ar as Ut,z as k,u as re,v as y,y as ie,V as Ot,C as jt,a7 as ye,ai as Xt,ao as mt,L as gt,U,Q as W,X as Qe,Y as Yt,a1 as ot,F as se,k as B,o as E,x as z,ap as Ve,aw as Vt,m as we,j as x,t as ee,a9 as Jt,ab as Qt,ac as Gt,ad as Zt,E as Kt,ae as $t,q as xt,r as en}from"./index-666c05ef.js";import{f as dt,B as tn}from"./Button-41f5a565.js";import{B as Pt}from"./BlockLabel-2a811b8f.js";import{I as Je}from"./Image-5eebaf8f.js";import{C as nn,i as sn,b as Ht,U as rn,W as ln}from"./StaticImage.svelte_svelte_type_style_lang-4ac209c1.js";import{I as Ae}from"./IconButton-9196078c.js";import{C as an,M as Ge}from"./ModifyUpload-ee50d215.js";import{C as on}from"./Copy-0f9df84b.js";import{U as un}from"./Upload-04601b90.js";import{u as fn,S as _n}from"./ShareButton-314ebda9.js";import{E as hn}from"./Empty-0485d83c.js";import{D as cn}from"./Download-960acb1a.js";import"./Blocks-e57874b8.js";import{U as mn}from"./UploadText-d6aada6a.js";import{E as Us}from"./Image-6e82c2a6.js";import"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";function gn(t){let e,n,s;return{c(){e=$("svg"),n=$("path"),s=$("path"),m(n,"d","M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z"),m(n,"fill","currentColor"),m(s,"d","M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z"),m(s,"fill","currentColor"),m(e,"width","100%"),m(e,"height","100%"),m(e,"viewBox","0 0 32 32")},m(r,l){C(r,e,l),X(e,n),X(e,s)},p:Y,i:Y,o:Y,d(r){r&&S(e)}}}class dn extends ae{constructor(e){super(),oe(this,e,null,gn,le,{})}}function bn(t){let e,n,s,r,l,i,o;return{c(){e=$("svg"),n=$("circle"),s=$("circle"),r=$("circle"),l=$("circle"),i=$("circle"),o=$("path"),m(n,"cx","10"),m(n,"cy","12"),m(n,"r","2"),m(n,"fill","currentColor"),m(s,"cx","16"),m(s,"cy","9"),m(s,"r","2"),m(s,"fill","currentColor"),m(r,"cx","22"),m(r,"cy","12"),m(r,"r","2"),m(r,"fill","currentColor"),m(l,"cx","23"),m(l,"cy","18"),m(l,"r","2"),m(l,"fill","currentColor"),m(i,"cx","19"),m(i,"cy","23"),m(i,"r","2"),m(i,"fill","currentColor"),m(o,"fill","currentColor"),m(o,"d","M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z"),m(e,"width","100%"),m(e,"height","100%"),m(e,"viewBox","0 0 32 32")},m(a,u){C(a,e,u),X(e,n),X(e,s),X(e,r),X(e,l),X(e,i),X(e,o)},p:Y,i:Y,o:Y,d(a){a&&S(e)}}}class wn extends ae{constructor(e){super(),oe(this,e,null,bn,le,{})}}function kn(t){let e,n;return{c(){e=$("svg"),n=$("path"),m(n,"fill","currentColor"),m(n,"d","M7 27h23v2H7zm20.38-16.49l-7.93-7.92a2 2 0 0 0-2.83 0l-14 14a2 2 0 0 0 0 2.83L7.13 24h9.59l10.66-10.66a2 2 0 0 0 0-2.83zM15.89 22H8l-4-4l6.31-6.31l7.93 7.92zm3.76-3.76l-7.92-7.93L18 4l8 7.93z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width","100%"),m(e,"height","100%"),m(e,"viewBox","0 0 32 32")},m(s,r){C(s,e,r),X(e,n)},p:Y,i:Y,o:Y,d(s){s&&S(e)}}}class pn extends ae{constructor(e){super(),oe(this,e,null,kn,le,{})}}function In(t){let e,n;return{c(){e=$("svg"),n=$("path"),m(n,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width","100%"),m(e,"height","100%"),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","1.5"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-edit-2")},m(s,r){C(s,e,r),X(e,n)},p:Y,i:Y,o:Y,d(s){s&&S(e)}}}let bt=class extends ae{constructor(e){super(),oe(this,e,null,In,le,{})}};const Wt=t=>{let e=t.currentTarget;const n=e.getBoundingClientRect(),s=e.naturalWidth/n.width,r=e.naturalHeight/n.height;if(s>r){n.width;const o=e.naturalHeight/s,a=(n.height-o)/2;var l=Math.round((t.clientX-n.left)*s),i=Math.round((t.clientY-n.top-a)*s)}else{const o=e.naturalWidth/r;n.height;const a=(n.width-o)/2;var l=Math.round((t.clientX-n.left-a)*r),i=Math.round((t.clientY-n.top)*r)}return l<0||l>=e.naturalWidth||i<0||i>=e.naturalHeight?null:[l,i]};function yn(t){let e,n;return{c(){e=F("img"),J(e.src,n=t[0])||m(e,"src",n),m(e,"alt","")},m(s,r){C(s,e,r),t[4](e)},p(s,[r]){r&1&&!J(e.src,n=s[0])&&m(e,"src",n)},i:Y,o:Y,d(s){s&&S(e),t[4](null)}}}function An(t,e,n){let{image:s}=e,r;const l=Ce();let i;function o(){i.destroy()}function a(){i&&o(),i=new nn(r,{autoCropArea:1,cropend(){const _=i.getCroppedCanvas().toDataURL();l("crop",_)}}),l("crop",s)}function u(_){j[_?"unshift":"push"](()=>{r=_,n(1,r)})}return t.$$set=_=>{"image"in _&&n(0,s=_.image)},[s,r,o,a,u]}class Ft extends ae{constructor(e){super(),oe(this,e,An,yn,le,{image:0,destroy:2,create:3})}get image(){return this.$$.ctx[0]}set image(e){this.$$set({image:e}),q()}get destroy(){return this.$$.ctx[2]}get create(){return this.$$.ctx[3]}}class wt{constructor(e,n){this.x=e,this.y=n}}class kt extends wt{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,n){const s=e+Math.PI/2;this.x=this.x+Math.sin(s)*n,this.y=this.y-Math.cos(s)*n}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new wt(this.x-e.x,this.y-e.y)}getDistanceTo(e){const n=this.getDifferenceTo(e);return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}getAngleTo(e){const n=this.getDifferenceTo(e);return Math.atan2(n.y,n.x)}toObject(){return{x:this.x,y:this.y}}}const Cn=30;class Sn{constructor({radius:e=Cn,enabled:n=!0,initialPoint:s={x:0,y:0}}={}){this.radius=e,this._isEnabled=n,this.pointer=new kt(s.x,s.y),this.brush=new kt(s.x,s.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:n=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!n?!1:(this.pointer.update(e),n?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function pt(t,e,n){const s=t.slice();return s[73]=e[n].name,s[74]=e[n].zIndex,s[75]=e[n].opacity,s[76]=e,s[77]=n,s}function It(t){let e,n,s;return{c(){e=F("div"),e.textContent="Start drawing",m(e,"class","start-prompt svelte-xrgqd4")},m(r,l){C(r,e,l),s=!0},i(r){s||(r&&at(()=>{s&&(n||(n=mt(e,dt,{duration:50},!0)),n.run(1))}),s=!0)},o(r){r&&(n||(n=mt(e,dt,{duration:50},!1)),n.run(0)),s=!1},d(r){r&&S(e),r&&n&&n.end()}}}function yt(t){let e,n=t[73],s,r;const l=()=>t[34](e,n),i=()=>t[34](null,n);return{c(){e=F("canvas"),m(e,"key",t[73]),gt(e,"z-index",t[74]),m(e,"class","svelte-xrgqd4"),U(e,"lr",t[7]),U(e,"tb",!t[7]),gt(e,"opacity",t[75])},m(o,a){C(o,e,a),l(),s||(r=[W(e,"mousedown",t[73]==="interface"?t[9]:void 0),W(e,"mousemove",t[73]==="interface"?t[10]:void 0),W(e,"mouseup",t[73]==="interface"?t[11]:void 0),W(e,"mouseout",t[73]==="interface"?t[11]:void 0),W(e,"mouseout",function(){Qe(t[73]==="interface"?t[35]:void 0)&&(t[73]==="interface"?t[35]:void 0).apply(this,arguments)}),W(e,"blur",t[73]==="interface"?t[11]:void 0),W(e,"touchstart",t[73]==="interface"?t[9]:void 0),W(e,"touchmove",t[73]==="interface"?t[10]:void 0),W(e,"touchend",t[73]==="interface"?t[11]:void 0),W(e,"touchcancel",t[73]==="interface"?t[11]:void 0),W(e,"click",Yt(t[33]))],s=!0)},p(o,a){t=o,n!==t[73]&&(i(),n=t[73],l()),a[0]&128&&U(e,"lr",t[7]),a[0]&128&&U(e,"tb",!t[7])},d(o){o&&S(e),i(),s=!1,ot(r)}}}function Mn(t){let e,n,s,r=t[6]===0&&It(),l=ct(t[8]),i=[];for(let o=0;o<l.length;o+=1)i[o]=yt(pt(t,l,o));return{c(){e=F("div"),r&&r.c(),n=P();for(let o=0;o<i.length;o+=1)i[o].c();m(e,"class","wrap svelte-xrgqd4"),at(()=>t[37].call(e))},m(o,a){C(o,e,a),r&&r.m(e,null),X(e,n);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);t[36](e),s=Ut(e,t[37].bind(e))},p(o,a){if(o[6]===0?r?a[0]&64&&k(r,1):(r=It(),r.c(),k(r,1),r.m(e,n)):r&&(re(),y(r,1,1,()=>{r=null}),ie()),a[0]&3975){l=ct(o[8]);let u;for(u=0;u<l.length;u+=1){const _=pt(o,l,u);i[u]?i[u].p(_,a):(i[u]=yt(_),i[u].c(),i[u].m(e,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=l.length}},i(o){k(r)},o(o){y(r)},d(o){o&&S(e),r&&r.d(),Ot(i,o),t[36](null),s()}}}let vn="#aaa";function Tn(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}}function Bn(t){const e=En(t);if(e){const{r:n,g:s,b:r}=e;return(n*299+s*587+r*114)/1e3}return 0}function En(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function zn(t){const[e,n,s]=t.match(/\d+/g).map(Number);function r(l){const i=l.toString(16);return i.length===1?`0${i}`:i}return`#${r(e)}${r(n)}${r(s)}`}function Rn(t,e,n){let s;const r=Ce();let{value:l}=e,{value_img:i}=e,{mode:o="sketch"}=e,{brush_color:a="#0b0f19"}=e,{brush_radius:u}=e,{mask_opacity:_=.7}=e,{source:g}=e,{width:f=400}=e,{height:c=200}=e,{container_height:b=200}=e,{shape:p}=e;window.maskOpacity&&(_=window.maskOpacity);let Q=localStorage.setItem("colorPickerEnable",!1);localStorage.setItem("transparentMask",!1);let te=0,T=0,N=null,G,ue=f,he=c,fe;const ke=[{name:"interface",zIndex:15},{name:"mask",zIndex:13,opacity:_},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let v={},I={},Z=[],H=[],ce=!0,me=!0,ge=!1,de=!1,L=null,V=null,be=null,ne=0;o==="mask"&&localStorage.getItem("brush_color")&&(a=localStorage.getItem("brush_color"));function K(){if(!p){I.temp.drawImage(i,0,0,f,c);return}let h=i.naturalWidth,A=i.naturalHeight;const M=p[0]/p[1],R=h/A;let D=0,O=0;M<R?(h=p[1]*R,A=p[1],D=(p[0]-h)/2):M>R?(h=p[0],A=p[0]/R,O=(p[1]-A)/2):(D=0,O=0,h=p[0],A=p[1]),I.temp.drawImage(i,D,O,h,A)}jt(async()=>{Object.keys(v).forEach(h=>{n(30,I[h]=v[h].getContext("2d"),I)}),await ye(),i&&(i.addEventListener("load",h=>{g==="webcam"?(I.temp.save(),I.temp.translate(f,0),I.temp.scale(-1,1),I.temp.drawImage(i,0,0),I.temp.restore()):K(),I.drawing.drawImage(v.temp,0,0,f,c),_e()}),setTimeout(()=>{g==="webcam"?(I.temp.save(),I.temp.translate(f,0),I.temp.scale(-1,1),I.temp.drawImage(i,0,0),I.temp.restore()):K(),I.drawing.drawImage(v.temp,0,0,f,c),ve({lines:H.slice()}),_e()},100)),n(32,L=new Sn({radius:u*.05,enabled:!0,initialPoint:{x:f/2,y:c/2}})),be=new sn((h,A,...M)=>{We()}),be.observe(V),Le(),n(28,G=!0),requestAnimationFrame(()=>{Se(),requestAnimationFrame(()=>{pe()})})});function Se(){const h=f/2,A=c/2;L.update({x:h,y:A},{both:!0}),L.update({x:h,y:A},{both:!1}),ce=!0,me=!0}Xt(()=>{n(28,G=!1),be.unobserve(V)});function Ee(){De(),i&&K(),H.length==0&&r("clear"),n(6,ne=H.length),ve({lines:H}),_e()}function Me(h){De(),i&&(g==="webcam"?(I.temp.save(),I.temp.translate(f,0),I.temp.scale(-1,1),I.temp.drawImage(i,0,0),I.temp.restore()):K(),(!H||!H.length)&&I.drawing.drawImage(v.temp,0,0,f,c)),ve({lines:h}),n(6,ne=h.length),n(31,H=h),I.drawing.drawImage(v.temp,0,0,f,c),H.length==0&&r("clear")}function ze(){Me([]),_e()}function w(){const h=H.slice(0,-1);Me(h),_e()}let ve=({lines:h})=>{const A=a;h.forEach(M=>{const{points:R,brush_color:D,brush_radius:O}=M;Re(o==="mask"?{points:R,brush_color:A,brush_radius:O,mask:o==="mask"}:{points:R,brush_color:D,brush_radius:O,mask:o==="mask"})}),Be(),o==="mask"&&Oe()},Ze=({start:h,end:A,brush_color:M,brush_radius:R})=>{I.temp.beginPath(),I.temp.moveTo(h.x,h.y),I.temp.lineTo(A.x,A.y),n(30,I.temp.strokeStyle=M,I),n(30,I.temp.lineWidth=R,I),I.temp.stroke();const D={points:[h,A],brush_color:M,brush_radius:R};H.push(D),n(6,ne+=1),Be()},Ke=h=>{h.preventDefault();const{x:A,y:M}=Fe(h);if(window.isDrawing=!0,!h.touches&&h.button!==0)return;let R=window.drawStraightLine||!1;if((R===!1||H.length===0&&!N)&&(N=null),R){N===null?N={x:A,y:M}:(Ze({start:N,end:{x:A,y:M},brush_color:a,brush_radius:u}),N={x:A,y:M});return}if(Q=localStorage.getItem("colorPickerEnable")==="true",Q&&o!=="mask"){n(15,a=et(A,M));const D=zn(a);Ht.set(D),localStorage.setItem("colorPickerEnable","false");return}de=!0,h.touches&&h.touches.length>0&&L.update({x:A,y:M},{both:!0}),Ne(A,M),n(6,ne+=1)},qe=h=>{h.preventDefault(),localStorage.getItem("fillCanvasBrushColor")==="true"&&(tt(),localStorage.setItem("fillCanvasBrushColor",!1));const{x:A,y:M}=Fe(h);n(1,te=A),n(2,T=M),Ne(A,M)},$e=h=>{h.preventDefault(),qe(h),ge=!1,de=!1,Be(),o==="mask"&&Oe()},Ue=0,je=0,Pe=0,He=!1,We=async()=>{if(p&&V){const M=V?.getBoundingClientRect(),R=p[0]/p[1],D=M.width/M.height;n(7,He=R<D)}if(f===Ue&&c===je&&Pe===b)return;const h={width:f,height:c},A={height:b,width:b*(h.width/h.height)};await Promise.all([Te(v.interface,h,A),Te(v.drawing,h,A),Te(v.temp,h,A),Te(v.mask,h,A,!1)]),u||n(12,u=20*(h.width/A.width)),Le({once:!0}),setTimeout(()=>{je=c,Ue=f,Pe=b},10),await ye(),pe()},Te=async(h,A,M,R=!0)=>{if(!G)return;await ye();const D=window.devicePixelRatio||1;h.width=A.width*(R?D:1),h.height=A.height*(R?D:1);const O=h.getContext("2d");R&&O.scale(D,D),h.style.width=`${M.width}px`,h.style.height=`${M.height}px`},Fe=h=>{const A=v.interface.getBoundingClientRect();let M=h.clientX,R=h.clientY;return h.changedTouches&&h.changedTouches.length>0&&(M=h.changedTouches[0].clientX,R=h.changedTouches[0].clientY),{x:(M-A.left)/A.width*f,y:(R-A.top)/A.height*c}};function xe(){if(Q=localStorage.getItem("colorPickerEnable")==="true",Q&&o!=="mask")for(const h in v)n(0,v[h].style.cursor="crosshair",v);else for(const h in v)n(0,v[h].style.cursor="none",v)}let Ne=(h,A)=>{if(Q=localStorage.getItem("colorPickerEnable")==="true",xe(),Q&&o!=="mask")return;L.update({x:h,y:A});const M=!L.isEnabled();(de&&!ge||M&&de)&&(ge=!0,Z.push(L.brush.toObject())),ge&&(Z.push(L.brush.toObject()),Re({points:Z,brush_color:a,brush_radius:u,mask:o==="mask"})),ce=!0},Re=({points:h,brush_color:A,brush_radius:M,mask:R})=>{if(!h||h.length<2)return;let D=R?I.mask:I.temp;D.lineJoin="round",D.lineCap="round",D.strokeStyle=A,D.lineWidth=M;let O=h[0],Ie=h[1];D.moveTo(Ie.x,Ie.y),D.beginPath();for(var Ye=1,Nt=h.length;Ye<Nt;Ye++){var ht=Tn(O,Ie);D.quadraticCurveTo(O.x,O.y,ht.x,ht.y),O=h[Ye],Ie=h[Ye+1]}D.lineTo(O.x,O.y),D.stroke()};function et(h,A){const M=I.drawing.getImageData(h-1,A,1,1),[R,D,O,Ie]=M.data;return`rgb(${R}, ${D}, ${O})`}function tt(){if(o!=="mask"){n(30,I.temp.fillStyle=a,I),I.temp.fillRect(0,0,f,c);var h=0,A=c/2,M=f,R=c/2;I.drawing.beginPath(),I.drawing.moveTo(h,A),I.drawing.lineTo(M,R),n(30,I.drawing.strokeStyle=a,I),n(30,I.drawing.lineWidth=c,I),I.drawing.stroke(),n(31,H=[{points:[{x:h,y:A},{x:M,y:R}],brush_color:a,brush_radius:c}]),n(6,ne=1),Be()}}let Oe=()=>{Z.length<1||(Z.length=0,_e())},Be=()=>{Z.length<1||(H.push({points:Z.slice(),brush_color:a,brush_radius:u}),o!=="mask"&&(Z.length=0),I.drawing.drawImage(v.temp,0,0,f,c),_e())},_e=()=>{const h=Xe();r("change",h)};function pe(){return n(31,H=[]),De(),n(6,ne=0),!0}function De(){me=!0,I.temp.clearRect(0,0,f,c),n(30,I.temp.fillStyle=o==="mask"?"transparent":"#FFFFFF",I),I.temp.fillRect(0,0,f,c),o==="mask"&&I.mask.clearRect(0,0,v.mask.width,v.mask.height)}let Le=({once:h=!1}={})=>{if(ce||me){const A=L.getPointerCoordinates(),M=L.getBrushCoordinates();nt(I.interface,A,M),ce=!1,me=!1}h||window.requestAnimationFrame(()=>{Le()})},nt=(h,A,M)=>{h.clearRect(0,0,f,c);let R=M.x,D=M.y;te&&T&&(R=te,D=T),h.beginPath(),h.fillStyle=a;const O=localStorage.getItem("brushOutline")==="true";if(O){const Ie=Bn(a);h.strokeStyle=Ie>128?"black":"white",u>180?h.lineWidth=4:u>80?h.lineWidth=3:u>20?h.lineWidth=2:h.lineWidth=1}h.arc(R,D,u/2,0,Math.PI*2,!0),h.fill(),O&&h.stroke(),h.beginPath(),h.fillStyle=vn,h.arc(R,D,s,0,Math.PI*2,!0),h.fill()};function Xe(){return o==="mask"?v.mask.toDataURL("image/png"):v.drawing.toDataURL("image/jpg")}function st(h){se.call(this,t,h)}function rt(h,A){j[h?"unshift":"push"](()=>{v[A]=h,n(0,v)})}const it=()=>{n(1,te=n(2,T=0)),localStorage.setItem("overCanvas","false")};function lt(h){j[h?"unshift":"push"](()=>{V=h,n(5,V)})}function d(){ue=this.offsetWidth,he=this.offsetHeight,n(3,ue),n(4,he)}return t.$$set=h=>{"value"in h&&n(17,l=h.value),"value_img"in h&&n(18,i=h.value_img),"mode"in h&&n(19,o=h.mode),"brush_color"in h&&n(15,a=h.brush_color),"brush_radius"in h&&n(12,u=h.brush_radius),"mask_opacity"in h&&n(16,_=h.mask_opacity),"source"in h&&n(20,g=h.source),"width"in h&&n(13,f=h.width),"height"in h&&n(14,c=h.height),"container_height"in h&&n(21,b=h.container_height),"shape"in h&&n(22,p=h.shape)},t.$$.update=()=>{t.$$.dirty[0]&4218880&&p&&(f||c)&&(n(13,f=p[0]),n(14,c=p[1])),t.$$.dirty[0]&268566528&&G&&!l&&pe(),t.$$.dirty[0]&1880383489|t.$$.dirty[1]&1&&G&&i!==fe&&(n(29,fe=i),pe(),setTimeout(()=>{g==="webcam"?(I.temp.save(),I.temp.translate(f,0),I.temp.scale(-1,1),I.temp.drawImage(i,0,0),I.temp.restore()):K(),I.drawing.drawImage(v.temp,0,0,f,c),ve({lines:H.slice()}),_e()},50)),t.$$.dirty[0]&4096|t.$$.dirty[1]&2&&L&&(Se(),L.setRadius(u*.05)),t.$$.dirty[0]&24576&&(f||c)&&We(),t.$$.dirty[0]&4096&&(s=u*.075)},[v,te,T,ue,he,V,ne,He,ke,Ke,qe,$e,u,f,c,a,_,l,i,o,g,b,p,Ee,ze,w,pe,Xe,G,fe,I,H,L,st,rt,it,lt,d]}class ut extends ae{constructor(e){super(),oe(this,e,Rn,Mn,le,{value:17,value_img:18,mode:19,brush_color:15,brush_radius:12,mask_opacity:16,source:20,width:13,height:14,container_height:21,shape:22,redraw:23,clear_mask:24,undo:25,clear:26,get_image_data:27},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[23]}get clear_mask(){return this.$$.ctx[24]}get undo(){return this.$$.ctx[25]}get clear(){return this.$$.ctx[26]}get get_image_data(){return this.$$.ctx[27]}}function Dn(t){let e,n;return e=new Ae({props:{Icon:pn,label:"Clear"}}),e.$on("click",t[3]),{c(){B(e.$$.fragment)},m(s,r){E(e,s,r),n=!0},p:Y,i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}function Ln(t){let e,n,s,r,l,i,o,a,u;n=new Ae({props:{Icon:rn,label:"Undo"}}),n.$on("click",t[1]),l=new Ae({props:{Icon:on,label:"Redraw"}}),l.$on("click",t[2]);let _=Dn(t);return a=new Ae({props:{Icon:an,label:"Remove Image"}}),a.$on("click",t[4]),{c(){e=F("div"),B(n.$$.fragment),s=P(),r=F("span"),B(l.$$.fragment),i=P(),_&&_.c(),o=P(),B(a.$$.fragment),m(r,"class","hide_redraw svelte-q8xc61"),m(e,"class","svelte-q8xc61")},m(g,f){C(g,e,f),E(n,e,null),X(e,s),X(e,r),E(l,r,null),X(e,i),_&&_.m(e,null),X(e,o),E(a,e,null),u=!0},p(g,[f]){_.p(g,f)},i(g){u||(k(n.$$.fragment,g),k(l.$$.fragment,g),k(_),k(a.$$.fragment,g),u=!0)},o(g){y(n.$$.fragment,g),y(l.$$.fragment,g),y(_),y(a.$$.fragment,g),u=!1},d(g){g&&S(e),z(n),z(l),_&&_.d(),z(a)}}}function qn(t){const e=Ce();return[e,()=>e("undo"),()=>e("redraw"),i=>{e("clear_mask"),i.stopPropagation()},i=>{e("remove_image"),i.stopPropagation()}]}class ft extends ae{constructor(e){super(),oe(this,e,qn,Ln,le,{})}}function At(t){let e,n,s,r,l;return{c(){e=F("input"),m(e,"aria-label","Brush radius"),m(e,"type","range"),m(e,"min",n=.5*(t[2]/t[6])),m(e,"max",s=75*(t[2]/t[6])),m(e,"class","svelte-p4aq0j")},m(i,o){C(i,e,o),Ve(e,t[0]),r||(l=[W(e,"change",t[11]),W(e,"input",t[11])],r=!0)},p(i,o){o&68&&n!==(n=.5*(i[2]/i[6]))&&m(e,"min",n),o&68&&s!==(s=75*(i[2]/i[6]))&&m(e,"max",s),o&1&&Ve(e,i[0])},d(i){i&&S(e),r=!1,ot(l)}}}function Un(t){let e,n,s,r;n=new Ae({props:{Icon:wn,label:"Select brush color"}}),n.$on("click",t[12]);let l=t[5]&&Ct(t);return{c(){e=F("span"),B(n.$$.fragment),s=P(),l&&l.c(),m(e,"class","col svelte-p4aq0j")},m(i,o){C(i,e,o),E(n,e,null),X(e,s),l&&l.m(e,null),r=!0},p(i,o){i[5]?l?l.p(i,o):(l=Ct(i),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(i){r||(k(n.$$.fragment,i),r=!0)},o(i){y(n.$$.fragment,i),r=!1},d(i){i&&S(e),z(n),l&&l.d()}}}function Ct(t){let e,n,s;return{c(){e=F("input"),m(e,"aria-label","Brush color"),m(e,"type","color"),m(e,"class","svelte-p4aq0j")},m(r,l){C(r,e,l),Ve(e,t[1]),n||(s=[W(e,"change",t[13]),W(e,"input",t[14])],n=!0)},p(r,l){l&2&&Ve(e,r[1])},d(r){r&&S(e),n=!1,ot(s)}}}function jn(t){let e,n,s,r,l,i;s=new Ae({props:{Icon:dn,label:"Use brush"}}),s.$on("click",t[10]);let o=t[4]&&At(t),a=Un(t);return{c(){e=F("div"),n=F("span"),B(s.$$.fragment),r=P(),o&&o.c(),l=P(),a&&a.c(),m(n,"class","brush svelte-p4aq0j"),m(e,"class","wrap svelte-p4aq0j")},m(u,_){C(u,e,_),X(e,n),E(s,n,null),X(n,r),o&&o.m(n,null),X(e,l),a&&a.m(e,null),i=!0},p(u,[_]){u[4]?o?o.p(u,_):(o=At(u),o.c(),o.m(n,null)):o&&(o.d(1),o=null),a.p(u,_)},i(u){i||(k(s.$$.fragment,u),k(a),i=!0)},o(u){y(s.$$.fragment,u),y(a),i=!1},d(u){u&&S(e),z(s),o&&o.d(),a&&a.d()}}}function Pn(t,e,n){let s;const r=Ce();let l=!1,i=!1,{brush_radius:o=20}=e,{container_height:a}=e,{img_width:u}=e,{img_height:_}=e,{mode:g="other"}=e,{brush_color:f="#000"}=e;Ht.subscribe(T=>{n(1,f=T)});const c=()=>n(4,l=!l);function b(){o=Vt(this.value),n(0,o)}const p=()=>n(5,i=!i),Q=()=>{g==="mask"&&r("redraw")};function te(){f=this.value,n(1,f)}return t.$$set=T=>{"brush_radius"in T&&n(0,o=T.brush_radius),"container_height"in T&&n(8,a=T.container_height),"img_width"in T&&n(2,u=T.img_width),"img_height"in T&&n(9,_=T.img_height),"mode"in T&&n(3,g=T.mode),"brush_color"in T&&n(1,f=T.brush_color)},t.$$.update=()=>{t.$$.dirty&772&&n(6,s=a*(u/_))},[o,f,u,g,l,i,s,r,a,_,c,b,p,Q,te]}class _t extends ae{constructor(e){super(),oe(this,e,Pn,jn,le,{brush_radius:0,container_height:8,img_width:2,img_height:9,mode:3,brush_color:1})}}function Hn(t){let e,n,s,r;return{c(){e=F("img"),J(e.src,n=t[0].image||t[0])||m(e,"src",n),m(e,"alt",""),m(e,"class","svelte-p3y7hu"),U(e,"webcam",t[5]==="webcam"&&t[9]),U(e,"selectable",t[10])},m(l,i){C(l,e,i),s||(r=W(e,"click",t[32]),s=!0)},p(l,i){i[0]&1&&!J(e.src,n=l[0].image||l[0])&&m(e,"src",n),i[0]&544&&U(e,"webcam",l[5]==="webcam"&&l[9]),i[0]&1024&&U(e,"selectable",l[10])},i:Y,o:Y,d(l){l&&S(e),s=!1,r()}}}function Wn(t){let e=t[24],n,s,r,l=St(t),i=t[19]>0&&Mt(t);return{c(){l.c(),n=P(),i&&i.c(),s=we()},m(o,a){l.m(o,a),C(o,n,a),i&&i.m(o,a),C(o,s,a),r=!0},p(o,a){a[0]&16777216&&le(e,e=o[24])?(l.d(1),l=St(o),l.c(),l.m(n.parentNode,n)):l.p(o,a),o[19]>0?i?(i.p(o,a),a[0]&524288&&k(i,1)):(i=Mt(o),i.c(),k(i,1),i.m(s.parentNode,s)):i&&(re(),y(i,1,1,()=>{i=null}),ie())},i(o){r||(k(i),r=!0)},o(o){y(i),r=!1},d(o){o&&(S(n),S(s)),l.d(o),i&&i.d(o)}}}function Fn(t){let e,n,s,r,l,i,o;return e=new Ge({props:{editable:!0}}),e.$on("edit",t[57]),e.$on("clear",t[27]),{c(){B(e.$$.fragment),n=P(),s=F("img"),J(s.src,r=t[0])||m(s,"src",r),m(s,"alt",""),m(s,"class","svelte-p3y7hu"),U(s,"selectable",t[10]),U(s,"webcam",t[5]==="webcam"&&t[9])},m(a,u){E(e,a,u),C(a,n,u),C(a,s,u),l=!0,i||(o=W(s,"click",t[32]),i=!0)},p(a,u){(!l||u[0]&1&&!J(s.src,r=a[0]))&&m(s,"src",r),(!l||u[0]&1024)&&U(s,"selectable",a[10]),(!l||u[0]&544)&&U(s,"webcam",a[5]==="webcam"&&a[9])},i(a){l||(k(e.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),l=!1},d(a){a&&(S(n),S(s)),z(e,a),i=!1,o()}}}function Nn(t){let e,n,s,r,l={image:t[0]};return e=new Ft({props:l}),t[55](e),e.$on("crop",t[28]),s=new Ge({}),s.$on("clear",t[56]),{c(){B(e.$$.fragment),n=P(),B(s.$$.fragment)},m(i,o){E(e,i,o),C(i,n,o),E(s,i,o),r=!0},p(i,o){const a={};o[0]&1&&(a.image=i[0]),e.$set(a)},i(i){r||(k(e.$$.fragment,i),k(s.$$.fragment,i),r=!0)},o(i){y(e.$$.fragment,i),y(s.$$.fragment,i),r=!1},d(i){i&&S(n),t[55](null),z(e,i),z(s,i)}}}function On(t){let e,n,s=t[5]==="webcam"&&!t[24]&&Tt(t);return{c(){s&&s.c(),e=we()},m(r,l){s&&s.m(r,l),C(r,e,l),n=!0},p(r,l){r[5]==="webcam"&&!r[24]?s?(s.p(r,l),l[0]&16777248&&k(s,1)):(s=Tt(r),s.c(),k(s,1),s.m(e.parentNode,e)):s&&(re(),y(s,1,1,()=>{s=null}),ie())},i(r){n||(k(s),n=!0)},o(r){y(s),n=!1},d(r){r&&S(e),s&&s.d(r)}}}function Xn(t){let e,n,s,r,l,i,o;e=new ft({}),e.$on("undo",t[46]),e.$on("redraw",t[47]),e.$on("clear",t[30]),e.$on("remove_image",t[30]);let a=t[1]==="color-sketch"&&Bt(t);function u(f){t[50](f)}function _(f){t[51](f)}let g={value:t[0],mode:t[14],width:t[19]||t[23],height:t[18]||t[22],container_height:t[20]||t[22],shape:t[6]};return t[2]!==void 0&&(g.brush_radius=t[2]),t[25]!==void 0&&(g.brush_color=t[25]),r=new ut({props:g}),j.push(()=>x(r,"brush_radius",u)),j.push(()=>x(r,"brush_color",_)),t[52](r),r.$on("change",t[28]),r.$on("clear",t[30]),{c(){B(e.$$.fragment),n=P(),a&&a.c(),s=P(),B(r.$$.fragment)},m(f,c){E(e,f,c),C(f,n,c),a&&a.m(f,c),C(f,s,c),E(r,f,c),o=!0},p(f,c){f[1]==="color-sketch"?a?(a.p(f,c),c[0]&2&&k(a,1)):(a=Bt(f),a.c(),k(a,1),a.m(s.parentNode,s)):a&&(re(),y(a,1,1,()=>{a=null}),ie());const b={};c[0]&1&&(b.value=f[0]),c[0]&16384&&(b.mode=f[14]),c[0]&8912896&&(b.width=f[19]||f[23]),c[0]&4456448&&(b.height=f[18]||f[22]),c[0]&5242880&&(b.container_height=f[20]||f[22]),c[0]&64&&(b.shape=f[6]),!l&&c[0]&4&&(l=!0,b.brush_radius=f[2],ee(()=>l=!1)),!i&&c[0]&33554432&&(i=!0,b.brush_color=f[25],ee(()=>i=!1)),r.$set(b)},i(f){o||(k(e.$$.fragment,f),k(a),k(r.$$.fragment,f),o=!0)},o(f){y(e.$$.fragment,f),y(a),y(r.$$.fragment,f),o=!1},d(f){f&&(S(n),S(s)),z(e,f),a&&a.d(f),t[52](null),z(r,f)}}}function Yn(t){let e,n,s;function r(i){t[45](i)}let l={filetype:"image/*",include_file_metadata:!1,disable_click:!!t[0],$$slots:{default:[Kn]},$$scope:{ctx:t}};return t[13]!==void 0&&(l.dragging=t[13]),e=new un({props:l}),j.push(()=>x(e,"dragging",r)),e.$on("load",t[26]),{c(){B(e.$$.fragment)},m(i,o){E(e,i,o),s=!0},p(i,o){const a={};o[0]&1&&(a.disable_click=!!i[0]),o[0]&67100391|o[2]&32&&(a.$$scope={dirty:o,ctx:i}),!n&&o[0]&8192&&(n=!0,a.dragging=i[13],ee(()=>n=!1)),e.$set(a)},i(i){s||(k(e.$$.fragment,i),s=!0)},o(i){y(e.$$.fragment,i),s=!1},d(i){z(e,i)}}}function St(t){let e,n,s,r;return{c(){e=F("img"),m(e,"class","absolute-img svelte-p3y7hu"),J(e.src,n=t[24]||t[0]?.image||t[0])||m(e,"src",n),m(e,"alt","load-1"),U(e,"webcam",t[5]==="webcam"&&t[9])},m(l,i){C(l,e,i),t[58](e),s||(r=W(e,"load",t[29]),s=!0)},p(l,i){i[0]&16777217&&!J(e.src,n=l[24]||l[0]?.image||l[0])&&m(e,"src",n),i[0]&544&&U(e,"webcam",l[5]==="webcam"&&l[9])},d(l){l&&S(e),t[58](null),s=!1,r()}}}function Mt(t){let e,n,s,r,l,i,o,a;function u(c){t[60](c)}function _(c){t[61](c)}let g={value:t[0],mode:t[14],width:t[19]||t[23],height:t[18]||t[22],container_height:t[20]||t[22],value_img:t[21],source:t[5]};t[2]!==void 0&&(g.brush_radius=t[2]),t[25]!==void 0&&(g.brush_color=t[25]),e=new ut({props:g}),t[59](e),j.push(()=>x(e,"brush_radius",u)),j.push(()=>x(e,"brush_color",_)),e.$on("change",t[28]),l=new ft({}),l.$on("undo",t[62]),l.$on("redraw",t[63]),l.$on("clear",t[30]),l.$on("remove_image",t[30]);let f=(t[1]==="color-sketch"||t[1]==="sketch")&&vt(t);return{c(){B(e.$$.fragment),r=P(),B(l.$$.fragment),i=P(),f&&f.c(),o=we()},m(c,b){E(e,c,b),C(c,r,b),E(l,c,b),C(c,i,b),f&&f.m(c,b),C(c,o,b),a=!0},p(c,b){const p={};b[0]&1&&(p.value=c[0]),b[0]&16384&&(p.mode=c[14]),b[0]&8912896&&(p.width=c[19]||c[23]),b[0]&4456448&&(p.height=c[18]||c[22]),b[0]&5242880&&(p.container_height=c[20]||c[22]),b[0]&2097152&&(p.value_img=c[21]),b[0]&32&&(p.source=c[5]),!n&&b[0]&4&&(n=!0,p.brush_radius=c[2],ee(()=>n=!1)),!s&&b[0]&33554432&&(s=!0,p.brush_color=c[25],ee(()=>s=!1)),e.$set(p),c[1]==="color-sketch"||c[1]==="sketch"?f?(f.p(c,b),b[0]&2&&k(f,1)):(f=vt(c),f.c(),k(f,1),f.m(o.parentNode,o)):f&&(re(),y(f,1,1,()=>{f=null}),ie())},i(c){a||(k(e.$$.fragment,c),k(l.$$.fragment,c),k(f),a=!0)},o(c){y(e.$$.fragment,c),y(l.$$.fragment,c),y(f),a=!1},d(c){c&&(S(r),S(i),S(o)),t[59](null),z(e,c),z(l,c),f&&f.d(c)}}}function vt(t){let e,n,s,r;function l(a){t[64](a)}function i(a){t[65](a)}let o={container_height:t[20]||t[22],img_width:t[19]||t[23],img_height:t[18]||t[22],mode:t[14]};return t[2]!==void 0&&(o.brush_radius=t[2]),t[25]!==void 0&&(o.brush_color=t[25]),e=new _t({props:o}),j.push(()=>x(e,"brush_radius",l)),j.push(()=>x(e,"brush_color",i)),{c(){B(e.$$.fragment)},m(a,u){E(e,a,u),r=!0},p(a,u){const _={};u[0]&5242880&&(_.container_height=a[20]||a[22]),u[0]&8912896&&(_.img_width=a[19]||a[23]),u[0]&4456448&&(_.img_height=a[18]||a[22]),u[0]&16384&&(_.mode=a[14]),!n&&u[0]&4&&(n=!0,_.brush_radius=a[2],ee(()=>n=!1)),!s&&u[0]&33554432&&(s=!0,_.brush_color=a[25],ee(()=>s=!1)),e.$set(_)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),r=!1},d(a){z(e,a)}}}function Tt(t){let e,n;return e=new ln({props:{streaming:t[7],pending:t[8],mirror_webcam:t[9]}}),e.$on("capture",t[53]),e.$on("stream",t[28]),e.$on("error",t[54]),{c(){B(e.$$.fragment)},m(s,r){E(e,s,r),n=!0},p(s,r){const l={};r[0]&128&&(l.streaming=s[7]),r[0]&256&&(l.pending=s[8]),r[0]&512&&(l.mirror_webcam=s[9]),e.$set(l)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}function Bt(t){let e,n,s,r;function l(a){t[48](a)}function i(a){t[49](a)}let o={container_height:t[20]||t[22],img_width:t[19]||t[23],img_height:t[18]||t[22]};return t[2]!==void 0&&(o.brush_radius=t[2]),t[25]!==void 0&&(o.brush_color=t[25]),e=new _t({props:o}),j.push(()=>x(e,"brush_radius",l)),j.push(()=>x(e,"brush_color",i)),e.$on("redraw",function(){Qe(t[15].redraw())&&t[15].redraw().apply(this,arguments)}),{c(){B(e.$$.fragment)},m(a,u){E(e,a,u),r=!0},p(a,u){t=a;const _={};u[0]&5242880&&(_.container_height=t[20]||t[22]),u[0]&8912896&&(_.img_width=t[19]||t[23]),u[0]&4456448&&(_.img_height=t[18]||t[22]),!n&&u[0]&4&&(n=!0,_.brush_radius=t[2],ee(()=>n=!1)),!s&&u[0]&33554432&&(s=!0,_.brush_color=t[25],ee(()=>s=!1)),e.$set(_)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),r=!1},d(a){z(e,a)}}}function Vn(t){let e,n,s,r;return{c(){e=F("img"),J(e.src,n=t[0].image||t[0])||m(e,"src",n),m(e,"alt","hello"),m(e,"class","svelte-p3y7hu"),U(e,"webcam",t[5]==="webcam"&&t[9]),U(e,"selectable",t[10])},m(l,i){C(l,e,i),s||(r=W(e,"click",t[32]),s=!0)},p(l,i){i[0]&1&&!J(e.src,n=l[0].image||l[0])&&m(e,"src",n),i[0]&544&&U(e,"webcam",l[5]==="webcam"&&l[9]),i[0]&1024&&U(e,"selectable",l[10])},i:Y,o:Y,d(l){l&&S(e),s=!1,r()}}}function Jn(t){let e=t[24],n,s,r,l=Et(t),i=t[19]>0&&zt(t);return{c(){l.c(),n=P(),i&&i.c(),s=we()},m(o,a){l.m(o,a),C(o,n,a),i&&i.m(o,a),C(o,s,a),r=!0},p(o,a){a[0]&16777216&&le(e,e=o[24])?(l.d(1),l=Et(o),l.c(),l.m(n.parentNode,n)):l.p(o,a),o[19]>0?i?(i.p(o,a),a[0]&524288&&k(i,1)):(i=zt(o),i.c(),k(i,1),i.m(s.parentNode,s)):i&&(re(),y(i,1,1,()=>{i=null}),ie())},i(o){r||(k(i),r=!0)},o(o){y(i),r=!1},d(o){o&&(S(n),S(s)),l.d(o),i&&i.d(o)}}}function Qn(t){let e,n,s,r,l,i,o;return e=new Ge({props:{editable:!0}}),e.$on("edit",t[36]),e.$on("clear",t[27]),{c(){B(e.$$.fragment),n=P(),s=F("img"),J(s.src,r=t[0])||m(s,"src",r),m(s,"alt",""),m(s,"class","svelte-p3y7hu"),U(s,"scale-x-[-1]",t[5]==="webcam"&&t[9]),U(s,"selectable",t[10])},m(a,u){E(e,a,u),C(a,n,u),C(a,s,u),l=!0,i||(o=W(s,"click",t[32]),i=!0)},p(a,u){(!l||u[0]&1&&!J(s.src,r=a[0]))&&m(s,"src",r),(!l||u[0]&544)&&U(s,"scale-x-[-1]",a[5]==="webcam"&&a[9]),(!l||u[0]&1024)&&U(s,"selectable",a[10])},i(a){l||(k(e.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),l=!1},d(a){a&&(S(n),S(s)),z(e,a),i=!1,o()}}}function Gn(t){let e,n,s,r,l={image:t[0]};return e=new Ft({props:l}),t[34](e),e.$on("crop",t[28]),s=new Ge({}),s.$on("clear",t[35]),{c(){B(e.$$.fragment),n=P(),B(s.$$.fragment)},m(i,o){E(e,i,o),C(i,n,o),E(s,i,o),r=!0},p(i,o){const a={};o[0]&1&&(a.image=i[0]),e.$set(a)},i(i){r||(k(e.$$.fragment,i),k(s.$$.fragment,i),r=!0)},o(i){y(e.$$.fragment,i),y(s.$$.fragment,i),r=!1},d(i){i&&S(n),t[34](null),z(e,i),z(s,i)}}}function Zn(t){let e;const n=t[33].default,s=Jt(n,t,t[67],null);return{c(){s&&s.c()},m(r,l){s&&s.m(r,l),e=!0},p(r,l){s&&s.p&&(!e||l[2]&32)&&Qt(s,n,r,r[67],e?Zt(n,r[67],l,null):Gt(r[67]),null)},i(r){e||(k(s,r),e=!0)},o(r){y(s,r),e=!1},d(r){s&&s.d(r)}}}function Et(t){let e,n,s,r;return{c(){e=F("img"),m(e,"class","absolute-img svelte-p3y7hu"),J(e.src,n=t[24]||t[0]?.image||t[0])||m(e,"src",n),m(e,"data-source",t[16]),m(e,"data-isupload",t[17]),m(e,"alt","load-2"),U(e,"webcam",t[5]==="webcam"&&t[9])},m(l,i){C(l,e,i),t[37](e),s||(r=W(e,"load",t[29]),s=!0)},p(l,i){i[0]&16777217&&!J(e.src,n=l[24]||l[0]?.image||l[0])&&m(e,"src",n),i[0]&65536&&m(e,"data-source",l[16]),i[0]&131072&&m(e,"data-isupload",l[17]),i[0]&544&&U(e,"webcam",l[5]==="webcam"&&l[9])},d(l){l&&S(e),t[37](null),s=!1,r()}}}function zt(t){let e,n,s,r,l,i,o,a;function u(c){t[39](c)}function _(c){t[40](c)}let g={value:t[0],mask_opacity:t[11],mode:t[14],width:t[19]||t[23],height:t[18]||t[22],container_height:t[20]||t[22],value_img:t[21],source:t[5],shape:t[6]};t[2]!==void 0&&(g.brush_radius=t[2]),t[25]!==void 0&&(g.brush_color=t[25]),e=new ut({props:g}),t[38](e),j.push(()=>x(e,"brush_radius",u)),j.push(()=>x(e,"brush_color",_)),e.$on("change",t[28]),e.$on("redraw",function(){Qe(t[15].redraw())&&t[15].redraw().apply(this,arguments)}),l=new ft({}),l.$on("undo",t[41]),l.$on("redraw",t[42]),l.$on("clear_mask",t[31]),l.$on("remove_image",t[30]);let f=(t[1]==="color-sketch"||t[1]==="sketch")&&Rt(t);return{c(){B(e.$$.fragment),r=P(),B(l.$$.fragment),i=P(),f&&f.c(),o=we()},m(c,b){E(e,c,b),C(c,r,b),E(l,c,b),C(c,i,b),f&&f.m(c,b),C(c,o,b),a=!0},p(c,b){t=c;const p={};b[0]&1&&(p.value=t[0]),b[0]&2048&&(p.mask_opacity=t[11]),b[0]&16384&&(p.mode=t[14]),b[0]&8912896&&(p.width=t[19]||t[23]),b[0]&4456448&&(p.height=t[18]||t[22]),b[0]&5242880&&(p.container_height=t[20]||t[22]),b[0]&2097152&&(p.value_img=t[21]),b[0]&32&&(p.source=t[5]),b[0]&64&&(p.shape=t[6]),!n&&b[0]&4&&(n=!0,p.brush_radius=t[2],ee(()=>n=!1)),!s&&b[0]&33554432&&(s=!0,p.brush_color=t[25],ee(()=>s=!1)),e.$set(p),t[1]==="color-sketch"||t[1]==="sketch"?f?(f.p(t,b),b[0]&2&&k(f,1)):(f=Rt(t),f.c(),k(f,1),f.m(o.parentNode,o)):f&&(re(),y(f,1,1,()=>{f=null}),ie())},i(c){a||(k(e.$$.fragment,c),k(l.$$.fragment,c),k(f),a=!0)},o(c){y(e.$$.fragment,c),y(l.$$.fragment,c),y(f),a=!1},d(c){c&&(S(r),S(i),S(o)),t[38](null),z(e,c),z(l,c),f&&f.d(c)}}}function Rt(t){let e,n,s,r;function l(a){t[43](a)}function i(a){t[44](a)}let o={container_height:t[20]||t[22],img_width:t[19]||t[23],img_height:t[18]||t[22],mode:t[14]};return t[2]!==void 0&&(o.brush_radius=t[2]),t[25]!==void 0&&(o.brush_color=t[25]),e=new _t({props:o}),j.push(()=>x(e,"brush_radius",l)),j.push(()=>x(e,"brush_color",i)),e.$on("redraw",function(){Qe(t[15].redraw())&&t[15].redraw().apply(this,arguments)}),{c(){B(e.$$.fragment)},m(a,u){E(e,a,u),r=!0},p(a,u){t=a;const _={};u[0]&5242880&&(_.container_height=t[20]||t[22]),u[0]&8912896&&(_.img_width=t[19]||t[23]),u[0]&4456448&&(_.img_height=t[18]||t[22]),u[0]&16384&&(_.mode=t[14]),!n&&u[0]&4&&(n=!0,_.brush_radius=t[2],ee(()=>n=!1)),!s&&u[0]&33554432&&(s=!0,_.brush_color=t[25],ee(()=>s=!1)),e.$set(_)},i(a){r||(k(e.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),r=!1},d(a){z(e,a)}}}function Kn(t){let e,n,s,r;const l=[Zn,Gn,Qn,Jn,Vn],i=[];function o(a,u){return a[0]===null&&!a[24]||a[7]?0:a[1]==="select"?1:a[1]==="editor"?2:(a[1]==="sketch"||a[1]==="color-sketch")&&(a[0]!==null||a[24])?3:4}return e=o(t),n=i[e]=l[e](t),{c(){n.c(),s=we()},m(a,u){i[e].m(a,u),C(a,s,u),r=!0},p(a,u){let _=e;e=o(a),e===_?i[e].p(a,u):(re(),y(i[_],1,1,()=>{i[_]=null}),ie(),n=i[e],n?n.p(a,u):(n=i[e]=l[e](a),n.c()),k(n,1),n.m(s.parentNode,s))},i(a){r||(k(n),r=!0)},o(a){y(n),r=!1},d(a){a&&S(s),i[e].d(a)}}}function $n(t){let e,n,s,r,l,i,o;e=new Pt({props:{show_label:t[4],Icon:t[5]==="canvas"?bt:Je,label:t[3]||(t[5]==="canvas"?"Sketch":"Image")}});const a=[Yn,Xn,On,Nn,Fn,Wn,Hn],u=[];function _(g,f){return g[5]==="upload"?0:g[5]==="canvas"?1:g[0]===null&&!g[24]||g[7]?2:g[1]==="select"?3:g[1]==="editor"?4:(g[1]==="sketch"||g[1]==="color-sketch")&&(g[0]!==null||g[24])?5:6}return r=_(t),l=u[r]=a[r](t),{c(){B(e.$$.fragment),n=P(),s=F("div"),l.c(),m(s,"class","image-container svelte-p3y7hu"),m(s,"data-testid","image"),at(()=>t[66].call(s))},m(g,f){E(e,g,f),C(g,n,f),C(g,s,f),u[r].m(s,null),i=Ut(s,t[66].bind(s)),o=!0},p(g,f){const c={};f[0]&16&&(c.show_label=g[4]),f[0]&32&&(c.Icon=g[5]==="canvas"?bt:Je),f[0]&40&&(c.label=g[3]||(g[5]==="canvas"?"Sketch":"Image")),e.$set(c);let b=r;r=_(g),r===b?u[r].p(g,f):(re(),y(u[b],1,1,()=>{u[b]=null}),ie(),l=u[r],l?l.p(g,f):(l=u[r]=a[r](g),l.c()),k(l,1),l.m(s,null))},i(g){o||(k(e.$$.fragment,g),k(l),o=!0)},o(g){y(e.$$.fragment,g),y(l),o=!1},d(g){g&&(S(n),S(s)),z(e,g),u[r].d(),i()}}}function xn(t,e,n){let s,{$$slots:r={},$$scope:l}=e,{value:i}=e,{label:o=void 0}=e,{show_label:a}=e,{source:u="upload"}=e,{tool:_="editor"}=e,{shape:g}=e,{streaming:f=!1}=e,{pending:c=!1}=e,{mirror_webcam:b}=e,{brush_radius:p}=e,{selectable:Q=!1}=e,{mask_opacity:te}=e,T,N,G="",ue=!1;i&&(u==="upload"||u==="webcam")&&_==="sketch"&&(i={image:i,mask:null});function he({detail:d}){_==="color-sketch"?n(24,K=d):n(0,i=(u==="upload"||u==="webcam")&&_==="sketch"?{image:d,mask:null}:d),n(17,ue=!0),localStorage.setItem("resetLines","true"),v("upload",d)}function fe({detail:d}){n(0,i=null),n(24,K=void 0),v("clear")}async function ke({detail:d},h,A=!1){L==="mask"?u==="webcam"&&h?n(0,i={image:d,mask:null}):n(0,i={image:typeof i=="string"?i:i?.image||null,mask:d}):(u==="upload"||u==="webcam")&&_==="sketch"?n(0,i={image:d,mask:null}):(G===""&&n(16,G=d),n(0,i=d)),await ye(),v(f?"stream":"edit")}const v=Ce();let I=!1;function Z(d){const h=d.currentTarget;n(19,ge=h.naturalWidth),n(18,me=h.naturalHeight),n(20,de=h.getBoundingClientRect().height)}async function H(){T.clear(),await ye(),n(0,i=null),n(24,K=void 0),n(16,G=""),n(17,ue=!1)}async function ce(){T.clear_mask(),await ye()}let me=0,ge=0,de=0,L,V,be,ne,K;jt(async()=>{_==="color-sketch"&&i&&typeof i=="string"&&(n(24,K=i),await ye(),Z({currentTarget:V}))});const Se=d=>{let h=Wt(d);h&&v("select",{index:h,value:null})};function Ee(d){j[d?"unshift":"push"](()=>{N=d,n(12,N),n(0,i)})}const Me=d=>(fe(d),n(1,_="editor")),ze=()=>n(1,_="select");function w(d){j[d?"unshift":"push"](()=>{V=d,n(21,V)})}function ve(d){j[d?"unshift":"push"](()=>{T=d,n(15,T)})}function Ze(d){p=d,n(2,p)}function Ke(d){s=d,n(25,s),n(14,L),n(5,u),n(1,_)}const qe=()=>T.undo(),$e=()=>T.redraw();function Ue(d){p=d,n(2,p)}function je(d){s=d,n(25,s),n(14,L),n(5,u),n(1,_)}function Pe(d){I=d,n(13,I)}const He=()=>T.undo(),We=()=>T.redraw();function Te(d){p=d,n(2,p)}function Fe(d){s=d,n(25,s),n(14,L),n(5,u),n(1,_)}function xe(d){p=d,n(2,p)}function Ne(d){s=d,n(25,s),n(14,L),n(5,u),n(1,_)}function Re(d){j[d?"unshift":"push"](()=>{T=d,n(15,T)})}const et=d=>_==="color-sketch"?he(d):ke(d,!0,"");function tt(d){se.call(this,t,d)}function Oe(d){j[d?"unshift":"push"](()=>{N=d,n(12,N),n(0,i)})}const Be=d=>(fe(d),n(1,_="editor")),_e=()=>n(1,_="select");function pe(d){j[d?"unshift":"push"](()=>{V=d,n(21,V)})}function De(d){j[d?"unshift":"push"](()=>{T=d,n(15,T)})}function Le(d){p=d,n(2,p)}function nt(d){s=d,n(25,s),n(14,L),n(5,u),n(1,_)}const Xe=()=>T.undo(),st=()=>T.redraw();function rt(d){p=d,n(2,p)}function it(d){s=d,n(25,s),n(14,L),n(5,u),n(1,_)}function lt(){be=this.offsetHeight,ne=this.offsetWidth,n(22,be),n(23,ne)}return t.$$set=d=>{"value"in d&&n(0,i=d.value),"label"in d&&n(3,o=d.label),"show_label"in d&&n(4,a=d.show_label),"source"in d&&n(5,u=d.source),"tool"in d&&n(1,_=d.tool),"shape"in d&&n(6,g=d.shape),"streaming"in d&&n(7,f=d.streaming),"pending"in d&&n(8,c=d.pending),"mirror_webcam"in d&&n(9,b=d.mirror_webcam),"brush_radius"in d&&n(2,p=d.brush_radius),"selectable"in d&&n(10,Q=d.selectable),"mask_opacity"in d&&n(11,te=d.mask_opacity),"$$scope"in d&&n(67,l=d.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1&&v("change",i),t.$$.dirty[0]&8192&&v("drag",I),t.$$.dirty[0]&34&&(u==="canvas"&&_==="sketch"?n(14,L="bw-sketch"):_==="color-sketch"?n(14,L="color-sketch"):(u==="upload"||u==="webcam")&&_==="sketch"?n(14,L="mask"):n(14,L="editor")),t.$$.dirty[0]&16384&&n(25,s=L=="mask"?"#000000":"#000"),t.$$.dirty[0]&1&&(i===null||i.image===null&&i.mask===null)&&n(24,K=void 0),t.$$.dirty[0]&4097&&N&&(i?(n(12,N.image=i,N),N.create()):N.destroy())},[i,_,p,o,a,u,g,f,c,b,Q,te,N,I,L,T,G,ue,me,ge,de,V,be,ne,K,s,he,fe,ke,Z,H,ce,Se,r,Ee,Me,ze,w,ve,Ze,Ke,qe,$e,Ue,je,Pe,He,We,Te,Fe,xe,Ne,Re,et,tt,Oe,Be,_e,pe,De,Le,nt,Xe,st,rt,it,lt,l]}let es=class extends ae{constructor(e){super(),oe(this,e,xn,$n,le,{value:0,label:3,show_label:4,source:5,tool:1,shape:6,streaming:7,pending:8,mirror_webcam:9,brush_radius:2,selectable:10,mask_opacity:11},null,[-1,-1,-1])}};function ts(t){let e,n,s,r,l,i,o,a,u=t[3]&&Dt(t),_=t[5]&&Lt(t);return{c(){e=F("div"),u&&u.c(),n=P(),_&&_.c(),s=P(),r=F("img"),m(e,"class","icon-buttons svelte-1btp92j"),J(r.src,l=t[0])||m(r,"src",l),m(r,"alt",""),m(r,"class","svelte-1btp92j"),U(r,"selectable",t[4])},m(g,f){C(g,e,f),u&&u.m(e,null),X(e,n),_&&_.m(e,null),C(g,s,f),C(g,r,f),i=!0,o||(a=W(r,"click",t[6]),o=!0)},p(g,f){g[3]?u?(u.p(g,f),f&8&&k(u,1)):(u=Dt(g),u.c(),k(u,1),u.m(e,n)):u&&(re(),y(u,1,1,()=>{u=null}),ie()),g[5]?_?(_.p(g,f),f&32&&k(_,1)):(_=Lt(g),_.c(),k(_,1),_.m(e,null)):_&&(re(),y(_,1,1,()=>{_=null}),ie()),(!i||f&1&&!J(r.src,l=g[0]))&&m(r,"src",l),(!i||f&16)&&U(r,"selectable",g[4])},i(g){i||(k(u),k(_),i=!0)},o(g){y(u),y(_),i=!1},d(g){g&&(S(e),S(s),S(r)),u&&u.d(),_&&_.d(),o=!1,a()}}}function ns(t){let e,n;return e=new hn({props:{unpadded_box:!0,size:"large",$$slots:{default:[ss]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,r){E(e,s,r),n=!0},p(s,r){const l={};r&2048&&(l.$$scope={dirty:r,ctx:s}),e.$set(l)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}function Dt(t){let e,n,s;return n=new Ae({props:{Icon:cn,label:"Download"}}),{c(){e=F("a"),B(n.$$.fragment),m(e,"href",t[0]),m(e,"target",window.__is_colab__?"_blank":null),m(e,"download","image")},m(r,l){C(r,e,l),E(n,e,null),s=!0},p(r,l){(!s||l&1)&&m(e,"href",r[0])},i(r){s||(k(n.$$.fragment,r),s=!0)},o(r){y(n.$$.fragment,r),s=!1},d(r){r&&S(e),z(n)}}}function Lt(t){let e,n;return e=new _n({props:{formatter:t[7],value:t[0]}}),e.$on("share",t[8]),e.$on("error",t[9]),{c(){B(e.$$.fragment)},m(s,r){E(e,s,r),n=!0},p(s,r){const l={};r&1&&(l.value=s[0]),e.$set(l)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}function ss(t){let e,n;return e=new Je({}),{c(){B(e.$$.fragment)},m(s,r){E(e,s,r),n=!0},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}function rs(t){let e,n,s,r,l,i;e=new Pt({props:{show_label:t[2],Icon:Je,label:t[1]||"Image"}});const o=[ns,ts],a=[];function u(_,g){return _[0]===null?0:1}return s=u(t),r=a[s]=o[s](t),{c(){B(e.$$.fragment),n=P(),r.c(),l=we()},m(_,g){E(e,_,g),C(_,n,g),a[s].m(_,g),C(_,l,g),i=!0},p(_,[g]){const f={};g&4&&(f.show_label=_[2]),g&2&&(f.label=_[1]||"Image"),e.$set(f);let c=s;s=u(_),s===c?a[s].p(_,g):(re(),y(a[c],1,1,()=>{a[c]=null}),ie(),r=a[s],r?r.p(_,g):(r=a[s]=o[s](_),r.c()),k(r,1),r.m(l.parentNode,l))},i(_){i||(k(e.$$.fragment,_),k(r),i=!0)},o(_){y(e.$$.fragment,_),y(r),i=!1},d(_){_&&(S(n),S(l)),z(e,_),a[s].d(_)}}}function is(t,e,n){let{value:s}=e,{label:r=void 0}=e,{show_label:l}=e,{show_download_button:i=!0}=e,{selectable:o=!1}=e,{show_share_button:a=!1}=e;const u=Ce(),_=b=>{let p=Wt(b);p&&u("select",{index:p,value:null})},g=async b=>b?`<img src="${await fn(b,"base64")}" />`:"";function f(b){se.call(this,t,b)}function c(b){se.call(this,t,b)}return t.$$set=b=>{"value"in b&&n(0,s=b.value),"label"in b&&n(1,r=b.label),"show_label"in b&&n(2,l=b.show_label),"show_download_button"in b&&n(3,i=b.show_download_button),"selectable"in b&&n(4,o=b.selectable),"show_share_button"in b&&n(5,a=b.show_share_button)},t.$$.update=()=>{t.$$.dirty&1&&s&&u("change",s)},[s,r,l,i,o,a,_,g,f,c]}class ls extends ae{constructor(e){super(),oe(this,e,is,rs,le,{value:0,label:1,show_label:2,show_download_button:3,selectable:4,show_share_button:5})}}function as(t){let e,n,s;function r(i){t[30](i)}let l={brush_radius:t[16],brush_color:t[17],shape:t[15],source:t[5],tool:t[6],selectable:t[19],mask_opacity:t[18],label:t[7],show_label:t[8],pending:t[11],streaming:t[10],mirror_webcam:t[14],$$slots:{default:[us]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.value=t[0]),e=new es({props:l}),j.push(()=>x(e,"value",r)),e.$on("edit",t[31]),e.$on("clear",t[32]),e.$on("stream",t[33]),e.$on("drag",t[34]),e.$on("upload",t[35]),e.$on("select",t[36]),e.$on("share",t[37]),e.$on("error",t[38]),{c(){B(e.$$.fragment)},m(i,o){E(e,i,o),s=!0},p(i,o){const a={};o[0]&65536&&(a.brush_radius=i[16]),o[0]&131072&&(a.brush_color=i[17]),o[0]&32768&&(a.shape=i[15]),o[0]&32&&(a.source=i[5]),o[0]&64&&(a.tool=i[6]),o[0]&524288&&(a.selectable=i[19]),o[0]&262144&&(a.mask_opacity=i[18]),o[0]&128&&(a.label=i[7]),o[0]&256&&(a.show_label=i[8]),o[0]&2048&&(a.pending=i[11]),o[0]&1024&&(a.streaming=i[10]),o[0]&16384&&(a.mirror_webcam=i[14]),o[1]&256&&(a.$$scope={dirty:o,ctx:i}),!n&&o[0]&1&&(n=!0,a.value=i[0],ee(()=>n=!1)),e.$set(a)},i(i){s||(k(e.$$.fragment,i),s=!0)},o(i){y(e.$$.fragment,i),s=!1},d(i){z(e,i)}}}function os(t){let e,n;return e=new ls({props:{value:t[0],label:t[7],show_label:t[8],show_download_button:t[9],selectable:t[19],show_share_button:t[24]}}),e.$on("select",t[27]),e.$on("share",t[28]),e.$on("error",t[29]),{c(){B(e.$$.fragment)},m(s,r){E(e,s,r),n=!0},p(s,r){const l={};r[0]&1&&(l.value=s[0]),r[0]&128&&(l.label=s[7]),r[0]&256&&(l.show_label=s[8]),r[0]&512&&(l.show_download_button=s[9]),r[0]&524288&&(l.selectable=s[19]),r[0]&16777216&&(l.show_share_button=s[24]),e.$set(l)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}function us(t){let e,n;return e=new mn({props:{type:"image"}}),{c(){B(e.$$.fragment)},m(s,r){E(e,s,r),n=!0},p:Y,i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}function fs(t){let e,n,s,r,l,i;const o=[t[1]];let a={};for(let f=0;f<o.length;f+=1)a=Kt(a,o[f]);e=new $t({props:a});const u=[os,as],_=[];function g(f,c){return f[23]==="static"?0:1}return s=g(t),r=_[s]=u[s](t),{c(){B(e.$$.fragment),n=P(),r.c(),l=we()},m(f,c){E(e,f,c),C(f,n,c),_[s].m(f,c),C(f,l,c),i=!0},p(f,c){const b=c[0]&2?xt(o,[en(f[1])]):{};e.$set(b);let p=s;s=g(f),s===p?_[s].p(f,c):(re(),y(_[p],1,1,()=>{_[p]=null}),ie(),r=_[s],r?r.p(f,c):(r=_[s]=u[s](f),r.c()),k(r,1),r.m(l.parentNode,l))},i(f){i||(k(e.$$.fragment,f),k(r),i=!0)},o(f){y(e.$$.fragment,f),y(r),i=!1},d(f){f&&(S(n),S(l)),z(e,f),_[s].d(f)}}}function _s(t){let e,n;return e=new tn({props:{visible:t[4],variant:t[23]==="dynamic"&&t[0]===null&&t[5]==="upload"?"dashed":"solid",border_mode:t[25]?"focus":"base",padding:!1,elem_id:t[2],elem_classes:t[3],height:t[12]||(t[5]==="webcam"||t[23]==="static"?void 0:qt),width:t[13],allow_overflow:!1,container:t[20],scale:t[21],min_width:t[22],$$slots:{default:[fs]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(s,r){E(e,s,r),n=!0},p(s,r){const l={};r[0]&16&&(l.visible=s[4]),r[0]&8388641&&(l.variant=s[23]==="dynamic"&&s[0]===null&&s[5]==="upload"?"dashed":"solid"),r[0]&33554432&&(l.border_mode=s[25]?"focus":"base"),r[0]&4&&(l.elem_id=s[2]),r[0]&8&&(l.elem_classes=s[3]),r[0]&8392736&&(l.height=s[12]||(s[5]==="webcam"||s[23]==="static"?void 0:qt)),r[0]&8192&&(l.width=s[13]),r[0]&1048576&&(l.container=s[20]),r[0]&2097152&&(l.scale=s[21]),r[0]&4194304&&(l.min_width=s[22]),r[0]&59756515|r[1]&256&&(l.$$scope={dirty:r,ctx:s}),e.$set(l)},i(s){n||(k(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){z(e,s)}}}const qt=240;function hs(t,e,n){let{elem_id:s=""}=e,{elem_classes:r=[]}=e,{visible:l=!0}=e,{value:i=null}=e,{source:o="upload"}=e,{tool:a="editor"}=e,{label:u}=e,{show_label:_}=e,{show_download_button:g}=e,{streaming:f}=e,{pending:c}=e,{height:b}=e,{width:p}=e,{mirror_webcam:Q}=e,{shape:te}=e,{brush_radius:T}=e,{brush_color:N}=e,{mask_opacity:G}=e,{selectable:ue=!1}=e,{container:he=!0}=e,{scale:fe=null}=e,{min_width:ke=void 0}=e,{loading_status:v}=e,{mode:I}=e,{show_share_button:Z=!1}=e;const H=Ce();let ce;function me(w){se.call(this,t,w)}function ge(w){se.call(this,t,w)}function de(w){se.call(this,t,w)}function L(w){i=w,n(0,i)}function V(w){se.call(this,t,w)}function be(w){se.call(this,t,w)}function ne(w){se.call(this,t,w)}const K=({detail:w})=>n(25,ce=w);function Se(w){se.call(this,t,w)}function Ee(w){se.call(this,t,w)}function Me(w){se.call(this,t,w)}const ze=({detail:w})=>{n(1,v=v||{}),n(1,v.status="error",v),H("error",w)};return t.$$set=w=>{"elem_id"in w&&n(2,s=w.elem_id),"elem_classes"in w&&n(3,r=w.elem_classes),"visible"in w&&n(4,l=w.visible),"value"in w&&n(0,i=w.value),"source"in w&&n(5,o=w.source),"tool"in w&&n(6,a=w.tool),"label"in w&&n(7,u=w.label),"show_label"in w&&n(8,_=w.show_label),"show_download_button"in w&&n(9,g=w.show_download_button),"streaming"in w&&n(10,f=w.streaming),"pending"in w&&n(11,c=w.pending),"height"in w&&n(12,b=w.height),"width"in w&&n(13,p=w.width),"mirror_webcam"in w&&n(14,Q=w.mirror_webcam),"shape"in w&&n(15,te=w.shape),"brush_radius"in w&&n(16,T=w.brush_radius),"brush_color"in w&&n(17,N=w.brush_color),"mask_opacity"in w&&n(18,G=w.mask_opacity),"selectable"in w&&n(19,ue=w.selectable),"container"in w&&n(20,he=w.container),"scale"in w&&n(21,fe=w.scale),"min_width"in w&&n(22,ke=w.min_width),"loading_status"in w&&n(1,v=w.loading_status),"mode"in w&&n(23,I=w.mode),"show_share_button"in w&&n(24,Z=w.show_share_button)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(0,i=i||null),t.$$.dirty[0]&1&&H("change")},[i,v,s,r,l,o,a,u,_,g,f,c,b,p,Q,te,T,N,G,ue,he,fe,ke,I,Z,ce,H,me,ge,de,L,V,be,ne,K,Se,Ee,Me,ze]}class cs extends ae{constructor(e){super(),oe(this,e,hs,_s,le,{elem_id:2,elem_classes:3,visible:4,value:0,source:5,tool:6,label:7,show_label:8,show_download_button:9,streaming:10,pending:11,height:12,width:13,mirror_webcam:14,shape:15,brush_radius:16,brush_color:17,mask_opacity:18,selectable:19,container:20,scale:21,min_width:22,loading_status:1,mode:23,show_share_button:24},null,[-1,-1])}get elem_id(){return this.$$.ctx[2]}set elem_id(e){this.$$set({elem_id:e}),q()}get elem_classes(){return this.$$.ctx[3]}set elem_classes(e){this.$$set({elem_classes:e}),q()}get visible(){return this.$$.ctx[4]}set visible(e){this.$$set({visible:e}),q()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),q()}get source(){return this.$$.ctx[5]}set source(e){this.$$set({source:e}),q()}get tool(){return this.$$.ctx[6]}set tool(e){this.$$set({tool:e}),q()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),q()}get show_label(){return this.$$.ctx[8]}set show_label(e){this.$$set({show_label:e}),q()}get show_download_button(){return this.$$.ctx[9]}set show_download_button(e){this.$$set({show_download_button:e}),q()}get streaming(){return this.$$.ctx[10]}set streaming(e){this.$$set({streaming:e}),q()}get pending(){return this.$$.ctx[11]}set pending(e){this.$$set({pending:e}),q()}get height(){return this.$$.ctx[12]}set height(e){this.$$set({height:e}),q()}get width(){return this.$$.ctx[13]}set width(e){this.$$set({width:e}),q()}get mirror_webcam(){return this.$$.ctx[14]}set mirror_webcam(e){this.$$set({mirror_webcam:e}),q()}get shape(){return this.$$.ctx[15]}set shape(e){this.$$set({shape:e}),q()}get brush_radius(){return this.$$.ctx[16]}set brush_radius(e){this.$$set({brush_radius:e}),q()}get brush_color(){return this.$$.ctx[17]}set brush_color(e){this.$$set({brush_color:e}),q()}get mask_opacity(){return this.$$.ctx[18]}set mask_opacity(e){this.$$set({mask_opacity:e}),q()}get selectable(){return this.$$.ctx[19]}set selectable(e){this.$$set({selectable:e}),q()}get container(){return this.$$.ctx[20]}set container(e){this.$$set({container:e}),q()}get scale(){return this.$$.ctx[21]}set scale(e){this.$$set({scale:e}),q()}get min_width(){return this.$$.ctx[22]}set min_width(e){this.$$set({min_width:e}),q()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),q()}get mode(){return this.$$.ctx[23]}set mode(e){this.$$set({mode:e}),q()}get show_share_button(){return this.$$.ctx[24]}set show_share_button(e){this.$$set({show_share_button:e}),q()}}const zs=cs,Rs=["static","dynamic"],Ds=t=>({type:{payload:"string"},description:{payload:"image data as base64 string"},example_data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="});export{zs as Component,Us as ExampleComponent,Ds as document,Rs as modes};
//# sourceMappingURL=index-bd7d68d1.js.map
